"use strict";(self["webpackChunkwebapp"]=self["webpackChunkwebapp"]||[]).push([[348],{8009:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"setting"},[t("el-container",{staticClass:"seting-container"},[t("el-aside",{attrs:{width:"150px"}},[t("div",{staticClass:"left-container"},[t("el-menu",{staticClass:"setting_menu",attrs:{router:"","default-active":e.activePath,"background-color":"#4c4c4c","text-color":"#fff","active-text-color":"#ffd04b"}},[t("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.formData.capInfo.support_page_sys>0,expression:"formData.capInfo.support_page_sys > 0"}],attrs:{index:"/setting/system"},on:{click:function(t){return e.saveNavState("/setting/system")}}},[t("i",{staticClass:"el-icon-setting"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("系统信息")])]),t("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.formData.capInfo.support_page_cam>0,expression:"formData.capInfo.support_page_cam > 0"}],attrs:{index:"/setting/camera"},on:{click:function(t){return e.saveNavState("/setting/camera")}}},[t("i",{staticClass:"el-icon-camera"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("相机设置")])]),t("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.formData.capInfo.support_page_img>0,expression:"formData.capInfo.support_page_img > 0"}],attrs:{index:"/setting/image"},on:{click:function(t){return e.saveNavState("/setting/image")}}},[t("i",{staticClass:"el-icon-set-up"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("图像设置")])]),t("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.formData.capInfo.support_page_ai>0,expression:"formData.capInfo.support_page_ai > 0"}],attrs:{index:"/setting/ai"},on:{click:function(t){return e.saveNavState("/setting/ai")}}},[t("i",{staticClass:"el-icon-s-help"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("智能设置")])]),t("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.formData.capInfo.support_page_audio>0,expression:"formData.capInfo.support_page_audio > 0"}],attrs:{index:"/setting/audio"},on:{click:function(t){return e.saveNavState("/setting/audio")}}},[t("i",{staticClass:"el-icon-caret-right"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("音频设置")])]),t("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.formData.capInfo.support_page_video>0,expression:"formData.capInfo.support_page_video > 0"}],attrs:{index:"/setting/video"},on:{click:function(t){return e.saveNavState("/setting/video")}}},[t("i",{staticClass:"el-icon-caret-right"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("视频设置")])]),t("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.formData.capInfo.support_page_overlay>0,expression:"formData.capInfo.support_page_overlay > 0"}],attrs:{index:"/setting/overlay"},on:{click:function(t){return e.saveNavState("/setting/overlay")}}},[t("i",{staticClass:"el-icon-menu"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("图层叠加")])]),t("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.formData.capInfo.support_page_storage>0,expression:"formData.capInfo.support_page_storage > 0"}],attrs:{index:"/setting/storage"},on:{click:function(t){return e.saveNavState("/setting/storage")}}},[t("i",{staticClass:"el-icon-film"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("存储设置")])]),t("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.formData.capInfo.support_page_playback>0,expression:"formData.capInfo.support_page_playback > 0"}],attrs:{index:"/setting/playback"},on:{click:function(t){return e.saveNavState("/setting/playback")}}},[t("i",{staticClass:"el-icon-video-play"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("录像回放")])])],1)],1)]),t("el-main",[t("router-view",{attrs:{dual_mode:e.formData.capInfo.support_dual_sns}})],1)],1)],1)},r=[],o=(a(7658),{data(){return{activePath:"/setting/system",formData:{capInfo:{support_dual_sns:1,support_page_sys:1,support_page_cam:0,support_page_img:0,support_page_ai:0,support_page_audio:0,support_page_video:0,support_page_overlay:0,support_page_storage:0,support_page_playback:1}}}},created(){this.getInfo();var e=window.sessionStorage.getItem("settingActivePath");e&&(this.activePath=e),this.$router.path!==this.activePath&&this.$router.push(this.activePath)},methods:{async getInfo(){try{const{data:e}=await this.$http.get("setting/capability");console.log("setting page, get return: ",e),200===e.meta.status&&(this.formData.capInfo.support_dual_sns=e.data.capInfo.support_dual_sns,this.formData.capInfo.support_page_sys=e.data.capInfo.support_page_sys,this.formData.capInfo.support_page_cam=e.data.capInfo.support_page_cam,this.formData.capInfo.support_page_img=e.data.capInfo.support_page_img,this.formData.capInfo.support_page_ai=e.data.capInfo.support_page_ai,this.formData.capInfo.support_page_audio=e.data.capInfo.support_page_audio,this.formData.capInfo.support_page_video=e.data.capInfo.support_page_video,this.formData.capInfo.support_page_overlay=e.data.capInfo.support_page_overlay,this.formData.capInfo.support_page_storage=e.data.capInfo.support_page_storage,this.formData.capInfo.support_page_playback=e.data.capInfo.support_page_playback)}catch(e){this.$message.error("获取信息失败")}},saveNavState(e){window.sessionStorage.setItem("settingActivePath",e)}}}),s=o,l=a(3736),n=(0,l.Z)(s,i,r,!1,null,"215f4e68",null),m=n.exports},2080:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{"margin-bottom":"20px"}},[t("el-form",{ref:"formAiRef",attrs:{rules:e.formAiRules,model:e.formAi,"label-width":"100px","label-position":"left",size:"mini"}},[t("el-form-item",{attrs:{label:"Camera:"}},[t("el-select",{attrs:{disabled:0==e.dual_mode},on:{change:e.onChangeSrcID},model:{value:e.formAi.src_id,callback:function(t){e.$set(e.formAi,"src_id",t)},expression:"formAi.src_id"}},e._l(Array.from({length:2},((e,t)=>t)),(function(e){return t("el-option",{key:e,attrs:{label:""+e,value:e}})})),1)],1)],1)],1),t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"智能选项",name:"options"}},[t("el-form",{ref:"formAiRef",attrs:{rules:e.formAiRules,model:e.formAi,"label-width":"100px","label-position":"left",size:"mini"}},[t("el-form-item",{attrs:{label:"智能开启:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.ai_enable,callback:function(t){e.$set(e.formAi.ai_attr,"ai_enable",t)},expression:"formAi.ai_attr.ai_enable"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.ai_enable,expression:"formAi.ai_attr.ai_enable"}],attrs:{label:"推图策略:"}},[t("el-select",{model:{value:e.formAi.ai_attr.push_strategy.push_mode,callback:function(t){e.$set(e.formAi.ai_attr.push_strategy,"push_mode",t)},expression:"formAi.ai_attr.push_strategy.push_mode"}},e._l(e.push_strategy_options,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.ai_enable&&("FAST"==e.formAi.ai_attr.push_strategy.push_mode||"INTERVAL"==e.formAi.ai_attr.push_strategy.push_mode),expression:"formAi.ai_attr.ai_enable && (formAi.ai_attr.push_strategy.push_mode == 'FAST' || formAi.ai_attr.push_strategy.push_mode == 'INTERVAL')"}],attrs:{label:""}},[t("el-form-item",{attrs:{label:"间隔时间(ms)"}},[t("el-select",{model:{value:e.formAi.ai_attr.push_strategy.push_interval,callback:function(t){e.$set(e.formAi.ai_attr.push_strategy,"push_interval",t)},expression:"formAi.ai_attr.push_strategy.push_interval"}},e._l(e.push_interval_options,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.ai_enable&&("FAST"==e.formAi.ai_attr.push_strategy.push_mode||"INTERVAL"==e.formAi.ai_attr.push_strategy.push_mode),expression:"formAi.ai_attr.ai_enable && (formAi.ai_attr.push_strategy.push_mode == 'FAST' || formAi.ai_attr.push_strategy.push_mode == 'INTERVAL')"}],attrs:{label:""}},[t("el-form-item",{attrs:{label:"推图数量"}},[t("el-select",{model:{value:e.formAi.ai_attr.push_strategy.push_count,callback:function(t){e.$set(e.formAi.ai_attr.push_strategy,"push_count",t)},expression:"formAi.ai_attr.push_strategy.push_count"}},e._l(Array.from({length:5},((e,t)=>t+1)),(function(e){return t("el-option",{key:e,attrs:{label:""+e,value:e}})})),1)],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.ai_enable,expression:"formAi.ai_attr.ai_enable"}],attrs:{label:"人形防曝光:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.body_roi.enable,callback:function(t){e.$set(e.formAi.ai_attr.body_roi,"enable",t)},expression:"formAi.ai_attr.body_roi.enable"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.ai_enable&&e.formAi.ai_attr.body_roi.enable,expression:"formAi.ai_attr.ai_enable && formAi.ai_attr.body_roi.enable"}],attrs:{label:""}},[t("el-form-item",{attrs:{label:"人形最小宽度"}},[t("el-slider",{attrs:{min:10,max:1e3,"show-input":""},model:{value:e.formAi.ai_attr.body_roi.min_width,callback:function(t){e.$set(e.formAi.ai_attr.body_roi,"min_width",t)},expression:"formAi.ai_attr.body_roi.min_width"}})],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.ai_enable&&e.formAi.ai_attr.body_roi.enable,expression:"formAi.ai_attr.ai_enable && formAi.ai_attr.body_roi.enable"}],attrs:{label:""}},[t("el-form-item",{attrs:{label:"人形最小高度"}},[t("el-slider",{attrs:{min:10,max:1e3,"show-input":""},model:{value:e.formAi.ai_attr.body_roi.min_height,callback:function(t){e.$set(e.formAi.ai_attr.body_roi,"min_height",t)},expression:"formAi.ai_attr.body_roi.min_height"}})],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.ai_enable&&e.formAi.ai_attr.svc.valid,expression:"formAi.ai_attr.ai_enable && formAi.ai_attr.svc.valid"}],attrs:{label:"智能编码:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.svc.enable,callback:function(t){e.$set(e.formAi.ai_attr.svc,"enable",t)},expression:"formAi.ai_attr.svc.enable"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.ai_enable&&e.formAi.ai_attr.svc.enable,expression:"formAi.ai_attr.ai_enable && formAi.ai_attr.svc.enable"}],attrs:{label:"","label-width":"100px"}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.ai_enable&&e.formAi.ai_attr.svc.enable&&e.formAi.ai_attr.svc.sync_valid,expression:"formAi.ai_attr.ai_enable && formAi.ai_attr.svc.enable && formAi.ai_attr.svc.sync_valid"}],staticClass:"inline",attrs:{label:"同步模式:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.svc.sync_mode,callback:function(t){e.$set(e.formAi.ai_attr.svc,"sync_mode",t)},expression:"formAi.ai_attr.svc.sync_mode"}})],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.ai_enable&&e.formAi.ai_attr.svc.enable,expression:"formAi.ai_attr.ai_enable && formAi.ai_attr.svc.enable"}],attrs:{label:"","label-width":"100px"}},[t("el-row",[t("el-form-item",{staticClass:"inline",attrs:{label:"背景Qp:"}},[t("div",{staticClass:"inline",attrs:{width:"100px"}})]),t("el-form-item",{staticClass:"inline",attrs:{label:"iQp:"}},[t("div",{attrs:{id:"bg_iQp"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:-31,max:32,disabled:!1,size:"mini"},model:{value:e.formAi.ai_attr.svc.bg_qp.iQp,callback:function(t){e.$set(e.formAi.ai_attr.svc.bg_qp,"iQp",t)},expression:"formAi.ai_attr.svc.bg_qp.iQp"}})],1)]),t("el-form-item",{staticClass:"inline-margin",attrs:{label:"pQp:"}},[t("div",{attrs:{id:"bg_pQp"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:-31,max:32,disabled:!1,size:"mini"},model:{value:e.formAi.ai_attr.svc.bg_qp.pQp,callback:function(t){e.$set(e.formAi.ai_attr.svc.bg_qp,"pQp",t)},expression:"formAi.ai_attr.svc.bg_qp.pQp"}})],1)])],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.ai_enable&&e.formAi.ai_attr.svc.enable,expression:"formAi.ai_attr.ai_enable && formAi.ai_attr.svc.enable"}],attrs:{label:"","label-width":"100px"}},[t("el-row",[t("el-form-item",{staticClass:"inline",attrs:{label:"人脸:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.svc.face.enable,callback:function(t){e.$set(e.formAi.ai_attr.svc.face,"enable",t)},expression:"formAi.ai_attr.svc.face.enable"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.svc.face.enable,expression:"formAi.ai_attr.svc.face.enable"}],staticClass:"inline",attrs:{label:"iQp:"}},[t("div",{attrs:{id:"face_iQp"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:-31,max:32,disabled:!1,size:"mini"},model:{value:e.formAi.ai_attr.svc.face.qp.iQp,callback:function(t){e.$set(e.formAi.ai_attr.svc.face.qp,"iQp",t)},expression:"formAi.ai_attr.svc.face.qp.iQp"}})],1)]),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.svc.face.enable,expression:"formAi.ai_attr.svc.face.enable"}],staticClass:"inline-margin",attrs:{label:"pQp:"}},[t("div",{attrs:{id:"face_pQp"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:-31,max:32,disabled:!1,size:"mini"},model:{value:e.formAi.ai_attr.svc.face.qp.pQp,callback:function(t){e.$set(e.formAi.ai_attr.svc.face.qp,"pQp",t)},expression:"formAi.ai_attr.svc.face.qp.pQp"}})],1)])],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.ai_enable&&e.formAi.ai_attr.svc.enable,expression:"formAi.ai_attr.ai_enable && formAi.ai_attr.svc.enable"}],attrs:{label:"","label-width":"100px"}},[t("el-row",[t("el-form-item",{staticClass:"inline",attrs:{label:"人形:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.svc.body.enable,callback:function(t){e.$set(e.formAi.ai_attr.svc.body,"enable",t)},expression:"formAi.ai_attr.svc.body.enable"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.svc.body.enable,expression:"formAi.ai_attr.svc.body.enable"}],staticClass:"inline",attrs:{label:"iQp:"}},[t("div",{attrs:{id:"body_iQp"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:-31,max:32,disabled:!1,size:"mini"},model:{value:e.formAi.ai_attr.svc.body.qp.iQp,callback:function(t){e.$set(e.formAi.ai_attr.svc.body.qp,"iQp",t)},expression:"formAi.ai_attr.svc.body.qp.iQp"}})],1)]),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.svc.body.enable,expression:"formAi.ai_attr.svc.body.enable"}],staticClass:"inline-margin",attrs:{label:"pQp:"}},[t("div",{attrs:{id:"body_pQp"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:-31,max:32,disabled:!1,size:"mini"},model:{value:e.formAi.ai_attr.svc.body.qp.pQp,callback:function(t){e.$set(e.formAi.ai_attr.svc.body.qp,"pQp",t)},expression:"formAi.ai_attr.svc.body.qp.pQp"}})],1)])],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.ai_enable&&e.formAi.ai_attr.svc.enable,expression:"formAi.ai_attr.ai_enable && formAi.ai_attr.svc.enable"}],attrs:{label:"","label-width":"100px"}},[t("el-row",[t("el-form-item",{staticClass:"inline",attrs:{label:"机动车:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.svc.vehicle.enable,callback:function(t){e.$set(e.formAi.ai_attr.svc.vehicle,"enable",t)},expression:"formAi.ai_attr.svc.vehicle.enable"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.svc.vehicle.enable,expression:"formAi.ai_attr.svc.vehicle.enable"}],staticClass:"inline",attrs:{label:"iQp:"}},[t("div",{attrs:{id:"vehicle_iQp"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:-31,max:32,disabled:!1,size:"mini"},model:{value:e.formAi.ai_attr.svc.vehicle.qp.iQp,callback:function(t){e.$set(e.formAi.ai_attr.svc.vehicle.qp,"iQp",t)},expression:"formAi.ai_attr.svc.vehicle.qp.iQp"}})],1)]),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.svc.vehicle.enable,expression:"formAi.ai_attr.svc.vehicle.enable"}],staticClass:"inline-margin",attrs:{label:"pQp:"}},[t("div",{attrs:{id:"vehicle_pQp"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:-31,max:32,disabled:!1,size:"mini"},model:{value:e.formAi.ai_attr.svc.vehicle.qp.pQp,callback:function(t){e.$set(e.formAi.ai_attr.svc.vehicle.qp,"pQp",t)},expression:"formAi.ai_attr.svc.vehicle.qp.pQp"}})],1)])],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.ai_enable&&e.formAi.ai_attr.svc.enable,expression:"formAi.ai_attr.ai_enable && formAi.ai_attr.svc.enable"}],attrs:{label:"","label-width":"100px"}},[t("el-row",[t("el-form-item",{staticClass:"inline",attrs:{label:"非机动车:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.svc.cycle.enable,callback:function(t){e.$set(e.formAi.ai_attr.svc.cycle,"enable",t)},expression:"formAi.ai_attr.svc.cycle.enable"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.svc.cycle.enable,expression:"formAi.ai_attr.svc.cycle.enable"}],staticClass:"inline",attrs:{label:"iQp:"}},[t("div",{attrs:{id:"cycle_iQp"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:-31,max:32,disabled:!1,size:"mini"},model:{value:e.formAi.ai_attr.svc.cycle.qp.iQp,callback:function(t){e.$set(e.formAi.ai_attr.svc.cycle.qp,"iQp",t)},expression:"formAi.ai_attr.svc.cycle.qp.iQp"}})],1)]),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.svc.cycle.enable,expression:"formAi.ai_attr.svc.cycle.enable"}],staticClass:"inline-margin",attrs:{label:"pQp:"}},[t("div",{attrs:{id:"cycle_pQp"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:-31,max:32,disabled:!1,size:"mini"},model:{value:e.formAi.ai_attr.svc.cycle.qp.pQp,callback:function(t){e.$set(e.formAi.ai_attr.svc.cycle.qp,"pQp",t)},expression:"formAi.ai_attr.svc.cycle.qp.pQp"}})],1)])],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.ai_enable&&e.formAi.ai_attr.svc.enable,expression:"formAi.ai_attr.ai_enable && formAi.ai_attr.svc.enable"}],attrs:{label:"","label-width":"100px"}},[t("el-row",[t("el-form-item",{staticClass:"inline",attrs:{label:"车牌:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.svc.plate.enable,callback:function(t){e.$set(e.formAi.ai_attr.svc.plate,"enable",t)},expression:"formAi.ai_attr.svc.plate.enable"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.svc.plate.enable,expression:"formAi.ai_attr.svc.plate.enable"}],staticClass:"inline",attrs:{label:"iQp:"}},[t("div",{attrs:{id:"plate_iQp"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:-31,max:32,disabled:!1,size:"mini"},model:{value:e.formAi.ai_attr.svc.plate.qp.iQp,callback:function(t){e.$set(e.formAi.ai_attr.svc.plate.qp,"iQp",t)},expression:"formAi.ai_attr.svc.plate.qp.iQp"}})],1)]),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.svc.plate.enable,expression:"formAi.ai_attr.svc.plate.enable"}],staticClass:"inline-margin",attrs:{label:"pQp:"}},[t("div",{attrs:{id:"plate_pQp"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:-31,max:32,disabled:!1,size:"mini"},model:{value:e.formAi.ai_attr.svc.plate.qp.pQp,callback:function(t){e.$set(e.formAi.ai_attr.svc.plate.qp,"pQp",t)},expression:"formAi.ai_attr.svc.plate.qp.pQp"}})],1)])],1)],1)],1)],1),t("el-tab-pane",{attrs:{label:"事件上报",name:"events"}},[t("el-form",{ref:"formAiRef",attrs:{rules:e.formAiRules,model:e.formAi,"label-width":"150px","label-position":"left",size:"mini"}},[t("el-form-item",{attrs:{label:"移动侦测:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.events.motion_detect.enable,callback:function(t){e.$set(e.formAi.ai_attr.events.motion_detect,"enable",t)},expression:"formAi.ai_attr.events.motion_detect.enable"}}),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.events.motion_detect.enable,expression:"formAi.ai_attr.events.motion_detect.enable"}],attrs:{label:"Y阈值(1-255)"}},[t("el-slider",{attrs:{min:1,max:255,"show-input":""},model:{value:e.formAi.ai_attr.events.motion_detect.threshold_y,callback:function(t){e.$set(e.formAi.ai_attr.events.motion_detect,"threshold_y",t)},expression:"formAi.ai_attr.events.motion_detect.threshold_y"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.events.motion_detect.enable,expression:"formAi.ai_attr.events.motion_detect.enable"}],attrs:{label:"置信度(1-100)"}},[t("el-slider",{attrs:{min:1,max:100,"show-input":""},model:{value:e.formAi.ai_attr.events.motion_detect.confidence,callback:function(t){e.$set(e.formAi.ai_attr.events.motion_detect,"confidence",t)},expression:"formAi.ai_attr.events.motion_detect.confidence"}})],1)],1),t("el-form-item",{attrs:{label:"遮挡侦测:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.events.occlusion_detect.enable,callback:function(t){e.$set(e.formAi.ai_attr.events.occlusion_detect,"enable",t)},expression:"formAi.ai_attr.events.occlusion_detect.enable"}}),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.events.occlusion_detect.enable,expression:"formAi.ai_attr.events.occlusion_detect.enable"}],attrs:{label:"Y阈值(1-255):"}},[t("el-slider",{attrs:{min:1,max:255,"show-input":""},model:{value:e.formAi.ai_attr.events.occlusion_detect.threshold_y,callback:function(t){e.$set(e.formAi.ai_attr.events.occlusion_detect,"threshold_y",t)},expression:"formAi.ai_attr.events.occlusion_detect.threshold_y"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.events.occlusion_detect.enable,expression:"formAi.ai_attr.events.occlusion_detect.enable"}],attrs:{label:"置信度(1-100):"}},[t("el-slider",{attrs:{min:1,max:100,"show-input":""},model:{value:e.formAi.ai_attr.events.occlusion_detect.confidence,callback:function(t){e.$set(e.formAi.ai_attr.events.occlusion_detect,"confidence",t)},expression:"formAi.ai_attr.events.occlusion_detect.confidence"}})],1)],1),t("el-form-item",{attrs:{label:"场景切换:"}},[t("el-switch",{model:{value:e.formAi.ai_attr.events.scene_change_detect.enable,callback:function(t){e.$set(e.formAi.ai_attr.events.scene_change_detect,"enable",t)},expression:"formAi.ai_attr.events.scene_change_detect.enable"}}),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.events.scene_change_detect.enable,expression:"formAi.ai_attr.events.scene_change_detect.enable"}],attrs:{label:"阈值(1-100):"}},[t("el-slider",{attrs:{min:1,max:100,"show-input":""},model:{value:e.formAi.ai_attr.events.scene_change_detect.threshold_y,callback:function(t){e.$set(e.formAi.ai_attr.events.scene_change_detect,"threshold_y",t)},expression:"formAi.ai_attr.events.scene_change_detect.threshold_y"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAi.ai_attr.events.scene_change_detect.enable,expression:"formAi.ai_attr.events.scene_change_detect.enable"}],attrs:{label:"置信度(1-100):"}},[t("el-slider",{attrs:{min:1,max:100,"show-input":""},model:{value:e.formAi.ai_attr.events.scene_change_detect.confidence,callback:function(t){e.$set(e.formAi.ai_attr.events.scene_change_detect,"confidence",t)},expression:"formAi.ai_attr.events.scene_change_detect.confidence"}})],1)],1)],1)],1)],1),t("div",{staticStyle:{"margin-bottom":"20px"}},[t("el-divider"),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onSubmit}},[e._v("修改")])],1)],1)},r=[],o={props:["dual_mode"],data(){return{activeName:"options",detect_modes:[{label:"脸人模式",value:"facehuman"},{label:"结构化模式",value:"hvcfp"}],push_strategy_options:[{label:"最快推图",value:"FAST"},{label:"间隔推图",value:"INTERVAL"},{label:"最优推图",value:"BEST_FRAME"}],push_interval_options:[{label:"1000",value:1e3},{label:"2000",value:2e3},{label:"3000",value:3e3},{label:"5000",value:5e3},{label:"10000",value:1e4},{label:"20000",value:2e4}],formAi:{src_id:0,ai_attr:{ai_enable:!0,detect_model:"hvcfp",detect_fps:15,push_strategy:{push_mode:"BEST_FRAME",push_interval:2e3,push_count:1,push_same_frame:!0},detect_only:!1,facehuman:{face_detect:{enable:!0,draw_rect:!0},body_detect:{enable:!0,draw_rect:!0},face_identify:{enable:!0}},hvcfp:{face_detect:{enable:!0,draw_rect:!0},body_detect:{enable:!0,draw_rect:!0},vechicle_detect:{enable:!0,draw_rect:!0},cycle_detect:{enable:!0,draw_rect:!0},plate_detect:{enable:!0,draw_rect:!0},plate_identify:{enable:!0}},events:{motion_detect:{enable:!0,threshold_y:50,confidence:80},occlusion_detect:{enable:!0,threshold_y:100,confidence:80},scene_change_detect:{enable:!1,threshold_y:60,confidence:60}},body_roi:{enable:!1,min_width:100,min_height:100,mode:1},svc:{valid:!1,sync_valid:!1,enable:!1,sync_mode:!1,bg_qp:{iQp:0,pQp:0},body:{enable:!1,qp:{iQp:0,pQp:0}},vehicle:{enable:!1,qp:{iQp:0,pQp:0}},cycle:{enable:!1,qp:{iQp:0,pQp:0}},face:{enable:!1,qp:{iQp:0,pQp:0}},plate:{enable:!1,qp:{iQp:0,pQp:0}}}}},formAiRules:{}}},created(){console.log("ai++"),this.getInfo()},methods:{handleClick(e,t){},onSubmit(){this.$refs.formAiRef.validate((async e=>{if(!e)return!1;try{const{data:e}=await this.$http.post("setting/ai",this.formAi);console.log("ai post return: ",e),200===e.meta.status?this.$message.success("修改成功"):this.$message.error("修改失败")}catch(t){this.$message.error("修改失败")}}))},async getInfo(){try{const{data:e}=await this.$http.get("setting/ai",{params:{src_id:this.formAi.src_id}});console.log("ai get return: ",e),200===e.meta.status&&(this.formAi.ai_attr.ai_enable=e.data.ai_attr.ai_enable,this.formAi.ai_attr.detect_model=e.data.ai_attr.detect_model,this.formAi.ai_attr.detect_fps=e.data.ai_attr.detect_fps,this.formAi.ai_attr.push_strategy.push_mode=e.data.ai_attr.push_strategy.push_mode,this.formAi.ai_attr.push_strategy.push_interval=e.data.ai_attr.push_strategy.push_interval,this.formAi.ai_attr.push_strategy.push_count=e.data.ai_attr.push_strategy.push_count,this.formAi.ai_attr.push_strategy.push_same_frame=e.data.ai_attr.push_strategy.push_same_frame,this.formAi.ai_attr.detect_only=e.data.ai_attr.detect_only,"facehuman"===this.formAi.ai_attr.detect_model?(this.formAi.ai_attr.facehuman.face_detect.enable=e.data.ai_attr.facehuman.face_detect.enable,this.formAi.ai_attr.facehuman.face_detect.draw_rect=e.data.ai_attr.facehuman.face_detect.draw_rect,this.formAi.ai_attr.facehuman.body_detect.enable=e.data.ai_attr.facehuman.body_detect.enable,this.formAi.ai_attr.facehuman.body_detect.draw_rect=e.data.ai_attr.facehuman.body_detect.draw_rect,this.formAi.ai_attr.facehuman.face_identify.enable=e.data.ai_attr.facehuman.face_identify.enable):(this.formAi.ai_attr.hvcfp.face_detect.enable=e.data.ai_attr.hvcfp.face_detect.enable,this.formAi.ai_attr.hvcfp.face_detect.draw_rect=e.data.ai_attr.hvcfp.face_detect.draw_rect,this.formAi.ai_attr.hvcfp.body_detect.enable=e.data.ai_attr.hvcfp.body_detect.enable,this.formAi.ai_attr.hvcfp.body_detect.draw_rect=e.data.ai_attr.hvcfp.body_detect.draw_rect,this.formAi.ai_attr.hvcfp.vechicle_detect.enable=e.data.ai_attr.hvcfp.vechicle_detect.enable,this.formAi.ai_attr.hvcfp.vechicle_detect.draw_rect=e.data.ai_attr.hvcfp.vechicle_detect.draw_rect,this.formAi.ai_attr.hvcfp.cycle_detect.enable=e.data.ai_attr.hvcfp.cycle_detect.enable,this.formAi.ai_attr.hvcfp.cycle_detect.draw_rect=e.data.ai_attr.hvcfp.cycle_detect.draw_rect,this.formAi.ai_attr.hvcfp.plate_detect.enable=e.data.ai_attr.hvcfp.plate_detect.enable,this.formAi.ai_attr.hvcfp.plate_detect.draw_rect=e.data.ai_attr.hvcfp.plate_detect.draw_rect,this.formAi.ai_attr.hvcfp.plate_identify.enable=e.data.ai_attr.hvcfp.plate_identify.enable),this.formAi.ai_attr.events.motion_detect.enable=e.data.ai_attr.events.motion_detect.enable,this.formAi.ai_attr.events.motion_detect.threshold_y=e.data.ai_attr.events.motion_detect.threshold_y,this.formAi.ai_attr.events.motion_detect.confidence=e.data.ai_attr.events.motion_detect.confidence,this.formAi.ai_attr.events.occlusion_detect.enable=e.data.ai_attr.events.occlusion_detect.enable,this.formAi.ai_attr.events.occlusion_detect.threshold_y=e.data.ai_attr.events.occlusion_detect.threshold_y,this.formAi.ai_attr.events.occlusion_detect.confidence=e.data.ai_attr.events.occlusion_detect.confidence,this.formAi.ai_attr.events.scene_change_detect.enable=e.data.ai_attr.events.scene_change_detect.enable,this.formAi.ai_attr.events.scene_change_detect.threshold_y=e.data.ai_attr.events.scene_change_detect.threshold_y,this.formAi.ai_attr.events.scene_change_detect.confidence=e.data.ai_attr.events.scene_change_detect.confidence,this.formAi.ai_attr.body_roi.enable=e.data.ai_attr.body_roi.enable,this.formAi.ai_attr.body_roi.min_width=e.data.ai_attr.body_roi.min_width,this.formAi.ai_attr.body_roi.min_height=e.data.ai_attr.body_roi.min_height,this.formAi.ai_attr.body_roi.mode=e.data.ai_attr.body_roi.mode,this.formAi.ai_attr.svc.valid=e.data.ai_attr.svc.valid,this.formAi.ai_attr.svc.sync_valid=e.data.ai_attr.svc.sync_valid,this.formAi.ai_attr.svc.enable=e.data.ai_attr.svc.enable,this.formAi.ai_attr.svc.sync_mode=e.data.ai_attr.svc.sync_mode,this.formAi.ai_attr.svc.bg_qp.iQp=e.data.ai_attr.svc.bg_qp.iQp,this.formAi.ai_attr.svc.bg_qp.pQp=e.data.ai_attr.svc.bg_qp.pQp,this.formAi.ai_attr.svc.body.enable=e.data.ai_attr.svc.body.enable,this.formAi.ai_attr.svc.body.qp.iQp=e.data.ai_attr.svc.body.qp.iQp,this.formAi.ai_attr.svc.body.qp.pQp=e.data.ai_attr.svc.body.qp.pQp,this.formAi.ai_attr.svc.vehicle.enable=e.data.ai_attr.svc.vehicle.enable,this.formAi.ai_attr.svc.vehicle.qp.iQp=e.data.ai_attr.svc.vehicle.qp.iQp,this.formAi.ai_attr.svc.vehicle.qp.pQp=e.data.ai_attr.svc.vehicle.qp.pQp,this.formAi.ai_attr.svc.cycle.enable=e.data.ai_attr.svc.cycle.enable,this.formAi.ai_attr.svc.cycle.qp.iQp=e.data.ai_attr.svc.cycle.qp.iQp,this.formAi.ai_attr.svc.cycle.qp.pQp=e.data.ai_attr.svc.cycle.qp.pQp,this.formAi.ai_attr.svc.face.enable=e.data.ai_attr.svc.face.enable,this.formAi.ai_attr.svc.face.qp.iQp=e.data.ai_attr.svc.face.qp.iQp,this.formAi.ai_attr.svc.face.qp.pQp=e.data.ai_attr.svc.face.qp.pQp,this.formAi.ai_attr.svc.plate.enable=e.data.ai_attr.svc.plate.enable,this.formAi.ai_attr.svc.plate.qp.iQp=e.data.ai_attr.svc.plate.qp.iQp,this.formAi.ai_attr.svc.plate.qp.pQp=e.data.ai_attr.svc.plate.qp.pQp)}catch(e){console.log("ai getInfo got exception: ",e),this.$message.error("获取信息失败")}},onChangeSrcID(){this.getInfo()}}},s=o,l=a(3736),n=(0,l.Z)(s,i,r,!1,null,"7c9c01e4",null),m=n.exports},8042:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var i=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"formAudioRef",attrs:{rules:e.formAudioRules,model:e.formAudio,"label-width":"100px",size:"mini"}},[t("el-form-item",{attrs:{label:"麦克风参数:"}}),t("el-form-item",{staticClass:"inline",attrs:{label:"音量:"}},[t("el-slider",{attrs:{min:0,max:10,"show-tooltip":!1,"show-input":""},model:{value:e.formAudio.capture_attr.volume_val,callback:function(t){e.$set(e.formAudio.capture_attr,"volume_val",t)},expression:"formAudio.capture_attr.volume_val"}})],1),t("el-form-item",{attrs:{label:"扬声器参数:"}}),t("el-form-item",{staticClass:"inline",attrs:{label:"音量:"}},[t("el-slider",{attrs:{min:0,max:10,"show-tooltip":!1,"show-input":""},model:{value:e.formAudio.play_attr.volume_val,callback:function(t){e.$set(e.formAudio.play_attr,"volume_val",t)},expression:"formAudio.play_attr.volume_val"}})],1),t("el-form-item",{attrs:{label:"声音检测:"}},[t("el-switch",{model:{value:e.formAudio.aed_attr.enable,callback:function(t){e.$set(e.formAudio.aed_attr,"enable",t)},expression:"formAudio.aed_attr.enable"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAudio.aed_attr.enable,expression:"formAudio.aed_attr.enable"}],attrs:{label:"分贝(dB):"}},[t("el-slider",{attrs:{min:0,max:150,"show-tooltip":!1,"show-input":""},model:{value:e.formAudio.aed_attr.threshold,callback:function(t){e.$set(e.formAudio.aed_attr,"threshold",t)},expression:"formAudio.aed_attr.threshold"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formAudio.aed_attr.enable,expression:"formAudio.aed_attr.enable"}],attrs:{label:"推送间隔(s):"}},[t("el-slider",{attrs:{min:0,max:600,"show-tooltip":!1,"show-input":""},model:{value:e.formAudio.aed_attr.interval,callback:function(t){e.$set(e.formAudio.aed_attr,"interval",t)},expression:"formAudio.aed_attr.interval"}})],1)],1),t("div",{staticStyle:{"margin-bottom":"20px"}},[t("el-divider"),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onSubmit}},[e._v("修改")])],1)],1)},r=[],o={props:["dual_mode"],data(){return{formAudio:{src_id:0,capture_attr:{volume_val:1},play_attr:{volume_val:1},aed_attr:{enable:!1,threshold:10,interval:10}},formAudioRules:{}}},created(){console.log("Audio++"),this.getInfo()},methods:{onSubmit(){this.$refs.formAudioRef.validate((async e=>{if(!e)return!1;try{const{data:e}=await this.$http.post("setting/audio",this.formAudio);console.log("Audio get return: ",e),200===e.meta.status?this.$message.success("修改成功"):this.$message.error("修改失败")}catch(t){this.$message.error("修改失败")}this.getInfo()}))},async getInfo(){try{const{data:e}=await this.$http.get("setting/audio",{params:{src_id:this.formAudio.src_id}});console.log("Audio get return: ",e),200===e.meta.status&&(this.formAudio.capture_attr.volume_val=e.data.info.capture_attr.volume_val,this.formAudio.play_attr.volume_val=e.data.info.play_attr.volume_val,this.formAudio.aed_attr.enable=e.data.info.aed_attr.enable,this.formAudio.aed_attr.threshold=1*e.data.info.aed_attr.threshold,this.formAudio.aed_attr.interval=e.data.info.aed_attr.interval)}catch(e){this.$message.error("获取信息失败")}},onChangeSrcID(){this.getInfo()},onSubmit(){this.$refs.formAudioRef.validate((async e=>{if(!e)return!1;try{const{data:e}=await this.$http.post("setting/audio",this.formAudio);console.log("Audio post return: ",e),200===e.meta.status?this.$message.success("修改成功"):this.$message.error("修改失败")}catch(t){this.$message.error("修改失败")}}))}}},s=o,l=a(3736),n=(0,l.Z)(s,i,r,!1,null,"5fb73132",null),m=n.exports},7692:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var i=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"formCameraRef",attrs:{rules:e.formCameraRules,model:e.formCamera,"label-width":"100px",size:"mini"}},[t("el-form-item",{attrs:{label:"Camera:"}},[t("el-select",{attrs:{disabled:0==e.dual_mode},on:{change:e.onChangeSrcID},model:{value:e.formCamera.src_id,callback:function(t){e.$set(e.formCamera,"src_id",t)},expression:"formCamera.src_id"}},e._l(Array.from({length:2},((e,t)=>t)),(function(e){return t("el-option",{key:e,attrs:{label:""+e,value:e}})})),1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formCamera.camera_attr.switch_capture_enable,expression:"formCamera.camera_attr.switch_capture_enable"}],attrs:{label:"开启抓拍:"}},[t("el-switch",{model:{value:e.formCamera.camera_attr.capture_enable,callback:function(t){e.$set(e.formCamera.camera_attr,"capture_enable",t)},expression:"formCamera.camera_attr.capture_enable"}})],1),t("el-row",[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formCamera.camera_attr.switch_work_mode_enable,expression:"formCamera.camera_attr.switch_work_mode_enable"}],staticClass:"inline",attrs:{label:"工作模式:"}},[t("el-select",{model:{value:e.formCamera.camera_attr.sns_work_mode,callback:function(t){e.$set(e.formCamera.camera_attr,"sns_work_mode",t)},expression:"formCamera.camera_attr.sns_work_mode"}},e._l(e.sns_mode_options,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formCamera.camera_attr.hdr_ratio_enable&&e.formCamera.camera_attr.sns_work_mode>1,expression:"formCamera.camera_attr.hdr_ratio_enable && formCamera.camera_attr.sns_work_mode > 1"}],staticClass:"inline",attrs:{label:"Ratio:"}},[t("el-select",{model:{value:e.formCamera.camera_attr.hdr_ratio,callback:function(t){e.$set(e.formCamera.camera_attr,"hdr_ratio",t)},expression:"formCamera.camera_attr.hdr_ratio"}},e._l(e.hdr_ratio_options,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formCamera.camera_attr.switch_PN_mode_enable,expression:"formCamera.camera_attr.switch_PN_mode_enable"}],attrs:{label:"相机帧率:"}},[t("el-select",{model:{value:e.formCamera.camera_attr.framerate,callback:function(t){e.$set(e.formCamera.camera_attr,"framerate",t)},expression:"formCamera.camera_attr.framerate"}},e._l(e.framerate_options,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"日夜模式:"}},[t("el-select",{model:{value:e.formCamera.camera_attr.daynight,callback:function(t){e.$set(e.formCamera.camera_attr,"daynight",t)},expression:"formCamera.camera_attr.daynight"}},e._l(e.daynight_options,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formCamera.camera_attr.switch_rotation_enable,expression:"formCamera.camera_attr.switch_rotation_enable"}],attrs:{label:"旋转:"}},[t("el-select",{model:{value:e.formCamera.camera_attr.rotation,callback:function(t){e.$set(e.formCamera.camera_attr,"rotation",t)},expression:"formCamera.camera_attr.rotation"}},e._l(e.rotation_options,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form",{attrs:{"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:2}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formCamera.camera_attr.switch_mirror_flip_enable,expression:"formCamera.camera_attr.switch_mirror_flip_enable"}],attrs:{label:"镜像:"}},[t("el-switch",{model:{value:e.formCamera.camera_attr.mirror,callback:function(t){e.$set(e.formCamera.camera_attr,"mirror",t)},expression:"formCamera.camera_attr.mirror"}})],1)],1),t("el-col",{attrs:{span:2}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formCamera.camera_attr.switch_mirror_flip_enable,expression:"formCamera.camera_attr.switch_mirror_flip_enable"}],attrs:{label:"翻转:"}},[t("el-switch",{model:{value:e.formCamera.camera_attr.flip,callback:function(t){e.$set(e.formCamera.camera_attr,"flip",t)},expression:"formCamera.camera_attr.flip"}})],1)],1)],1)],1),t("el-form-item",[t("el-divider"),t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("修改")])],1)],1)],1)},r=[],o=(a(7658),{props:["dual_mode"],data(){return{sns_mode_options:[{label:"SDR",value:1},{label:"HDR",value:2}],hdr_ratio_options:[{label:"默认",value:0},{label:"1:1",value:1}],rotation_options:[{label:"0°",value:0},{label:"90°",value:1},{label:"180°",value:2},{label:"270°",value:3}],daynight_options:[{label:"日间模式",value:0},{label:"夜间模式",value:1},{label:"自动模式",value:2}],isp_mode:[{label:"自动模式",value:1},{label:"手动模式",value:0}],framerate_options:[{label:"25",value:25},{label:"30",value:30}],formCamera:{src_id:0,camera_attr:{sns_work_mode:1,rotation:0,mirror:!1,flip:!1,framerate:25,daynight:0,nr_mode:!0,eis_support:!1,eis:!1,capture_enable:!0,switch_capture_enable:!1,switch_work_mode_enable:!1,switch_PN_mode_enable:!1,hdr_ratio_enable:!1,hdr_ratio:0,framerate_opts:[25,30]}},formCameraRules:{}}},created(){console.log("camera++"),this.getInfo()},methods:{onSubmit(){this.$refs.formCameraRef.validate((async e=>{if(!e)return!1;try{const{data:e}=await this.$http.post("setting/camera",this.formCamera);console.log("camera get return: ",e),200===e.meta.status?this.$message.success("修改成功"):this.$message.error("修改失败")}catch(t){this.$message.error("修改失败")}this.getInfo()}))},async getInfo(){try{const{data:t}=await this.$http.get("setting/camera",{params:{src_id:this.formCamera.src_id}});if(console.log("camera get return: ",t),200===t.meta.status){this.formCamera.camera_attr.sns_work_mode=t.data.camera_attr.sns_work_mode,this.formCamera.camera_attr.rotation=t.data.camera_attr.rotation,this.formCamera.camera_attr.mirror=t.data.camera_attr.mirror,this.formCamera.camera_attr.flip=t.data.camera_attr.flip,this.formCamera.camera_attr.daynight=t.data.camera_attr.daynight,this.formCamera.camera_attr.framerate=t.data.camera_attr.framerate,this.formCamera.camera_attr.nr_mode=t.data.camera_attr.nr_mode,this.formCamera.camera_attr.eis_support=t.data.camera_attr.eis_support,this.formCamera.camera_attr.eis=t.data.camera_attr.eis,this.formCamera.camera_attr.capture_enable=t.data.camera_attr.capture_enable,this.formCamera.camera_attr.switch_capture_enable=t.data.camera_attr.switch_capture_enable,this.formCamera.camera_attr.switch_work_mode_enable=t.data.camera_attr.switch_work_mode_enable,this.formCamera.camera_attr.switch_PN_mode_enable=t.data.camera_attr.switch_PN_mode_enable,this.formCamera.camera_attr.switch_mirror_flip_enable=t.data.camera_attr.switch_mirror_flip_enable,this.formCamera.camera_attr.switch_rotation_enable=t.data.camera_attr.switch_rotation_enable,this.formCamera.camera_attr.hdr_ratio_enable=t.data.camera_attr.hdr_ratio_enable,this.formCamera.camera_attr.hdr_ratio=t.data.camera_attr.hdr_ratio,this.formCamera.framerate_opts=t.data.framerate_opts;var e=[];for(let t=0;t<this.formCamera.framerate_opts.length;t++)e.push({lable:""+this.formCamera.framerate_opts[t],value:this.formCamera.framerate_opts[t]});this.framerate_options=e}}catch(t){this.$message.error("获取信息失败")}},onChangeSrcID(){this.getInfo()}}}),s=o,l=a(3736),n=(0,l.Z)(s,i,r,!1,null,"2599818e",null),m=n.exports},869:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var i=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"formImageRef",attrs:{rules:e.formImageRules,model:e.formImage,"label-width":"100px",size:"mini"}},[t("el-form-item",{attrs:{label:"Camera:"}},[t("el-select",{attrs:{disabled:0==e.dual_mode},on:{change:e.onChangeSrcID},model:{value:e.formImage.src_id,callback:function(t){e.$set(e.formImage,"src_id",t)},expression:"formImage.src_id"}},e._l(Array.from({length:2},((e,t)=>t)),(function(e){return t("el-option",{key:e,attrs:{label:""+e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"图像属性:"}},[t("el-select",{model:{value:e.formImage.image_attr.isp_auto_mode,callback:function(t){e.$set(e.formImage.image_attr,"isp_auto_mode",t)},expression:"formImage.image_attr.isp_auto_mode"}},e._l(e.isp_mode,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"","label-width":"90px"}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0===e.formImage.image_attr.isp_auto_mode,expression:"formImage.image_attr.isp_auto_mode === 0"}],staticClass:"inline",attrs:{label:"亮度:"}},[t("el-slider",{attrs:{min:0,max:100,"show-tooltip":!1,"show-input":"",size:"mini"},on:{change:e.onChangeImgAttrValue},model:{value:e.formImage.image_attr.brightness_val,callback:function(t){e.$set(e.formImage.image_attr,"brightness_val",t)},expression:"formImage.image_attr.brightness_val"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0===e.formImage.image_attr.isp_auto_mode,expression:"formImage.image_attr.isp_auto_mode === 0"}],staticClass:"inline",attrs:{label:"饱和度:"}},[t("el-slider",{attrs:{min:0,max:100,"show-tooltip":!1,"show-input":"",size:"mini"},on:{change:e.onChangeImgAttrValue},model:{value:e.formImage.image_attr.saturation_val,callback:function(t){e.$set(e.formImage.image_attr,"saturation_val",t)},expression:"formImage.image_attr.saturation_val"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0===e.formImage.image_attr.isp_auto_mode,expression:"formImage.image_attr.isp_auto_mode === 0"}],staticClass:"inline",attrs:{label:"对比度:"}},[t("el-slider",{attrs:{min:0,max:100,"show-tooltip":!1,"show-input":"",size:"mini"},on:{change:e.onChangeImgAttrValue},model:{value:e.formImage.image_attr.contrast_val,callback:function(t){e.$set(e.formImage.image_attr,"contrast_val",t)},expression:"formImage.image_attr.contrast_val"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0===e.formImage.image_attr.isp_auto_mode,expression:"formImage.image_attr.isp_auto_mode === 0"}],staticClass:"inline",attrs:{label:"锐度:"}},[t("el-slider",{attrs:{min:0,max:100,"show-tooltip":!1,"show-input":"",size:"mini"},on:{change:e.onChangeImgAttrValue},model:{value:e.formImage.image_attr.sharpness_val,callback:function(t){e.$set(e.formImage.image_attr,"sharpness_val",t)},expression:"formImage.image_attr.sharpness_val"}})],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formImage.ldc_attr.ldc_support,expression:"formImage.ldc_attr.ldc_support"}],attrs:{label:"畸变矫正:"}},[t("el-switch",{model:{value:e.formImage.ldc_attr.ldc_enable,callback:function(t){e.$set(e.formImage.ldc_attr,"ldc_enable",t)},expression:"formImage.ldc_attr.ldc_enable"}})],1),t("el-form-item",{attrs:{label:"","label-width":"90px"}},[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formImage.ldc_attr.ldc_support&&e.formImage.ldc_attr.ldc_enable,expression:"formImage.ldc_attr.ldc_support && formImage.ldc_attr.ldc_enable"}],staticClass:"inline",attrs:{label:"保持幅型比:"}},[t("el-switch",{model:{value:e.formImage.ldc_attr.aspect,callback:function(t){e.$set(e.formImage.ldc_attr,"aspect",t)},expression:"formImage.ldc_attr.aspect"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formImage.ldc_attr.ldc_support&&e.formImage.ldc_attr.ldc_enable&&!e.formImage.ldc_attr.aspect,expression:"formImage.ldc_attr.ldc_support && formImage.ldc_attr.ldc_enable && !formImage.ldc_attr.aspect"}],staticClass:"inline",attrs:{label:"水平缩放:"}},[t("el-slider",{attrs:{min:0,max:100,"show-tooltip":!1,"show-input":"",size:"mini"},on:{change:e.onChangeImgAttrValue},model:{value:e.formImage.ldc_attr.x_ratio,callback:function(t){e.$set(e.formImage.ldc_attr,"x_ratio",t)},expression:"formImage.ldc_attr.x_ratio"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formImage.ldc_attr.ldc_support&&e.formImage.ldc_attr.ldc_enable&&!e.formImage.ldc_attr.aspect,expression:"formImage.ldc_attr.ldc_support && formImage.ldc_attr.ldc_enable && !formImage.ldc_attr.aspect"}],staticClass:"inline",attrs:{label:"垂直缩放:"}},[t("el-slider",{attrs:{min:0,max:100,"show-tooltip":!1,"show-input":"",size:"mini"},on:{change:e.onChangeImgAttrValue},model:{value:e.formImage.ldc_attr.y_ratio,callback:function(t){e.$set(e.formImage.ldc_attr,"y_ratio",t)},expression:"formImage.ldc_attr.y_ratio"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formImage.ldc_attr.ldc_support&&e.formImage.ldc_attr.ldc_enable&&e.formImage.ldc_attr.aspect,expression:"formImage.ldc_attr.ldc_support && formImage.ldc_attr.ldc_enable && formImage.ldc_attr.aspect"}],staticClass:"inline",attrs:{label:"水平垂直缩放:"}},[t("el-slider",{attrs:{min:0,max:100,"show-tooltip":!1,"show-input":"",size:"mini"},on:{change:e.onChangeImgAttrValue},model:{value:e.formImage.ldc_attr.xy_ratio,callback:function(t){e.$set(e.formImage.ldc_attr,"xy_ratio",t)},expression:"formImage.ldc_attr.xy_ratio"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formImage.ldc_attr.ldc_support&&e.formImage.ldc_attr.ldc_enable,expression:"formImage.ldc_attr.ldc_support && formImage.ldc_attr.ldc_enable"}],staticClass:"inline",attrs:{label:"矫正强度:"}},[t("el-slider",{attrs:{min:-1e4,max:1e4,"show-tooltip":!1,"show-input":"",size:"mini"},on:{change:e.onChangeImgAttrValue},model:{value:e.formImage.ldc_attr.distor_ratio,callback:function(t){e.$set(e.formImage.ldc_attr,"distor_ratio",t)},expression:"formImage.ldc_attr.distor_ratio"}})],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formImage.dis_attr.dis_support,expression:"formImage.dis_attr.dis_support"}],attrs:{label:"数字防抖:"}},[t("el-switch",{model:{value:e.formImage.dis_attr.dis_enable,callback:function(t){e.$set(e.formImage.dis_attr,"dis_enable",t)},expression:"formImage.dis_attr.dis_enable"}})],1),t("el-form-item",[t("el-divider"),t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("修改")])],1)],1)],1)},r=[],o={props:["dual_mode"],data(){return{isp_mode:[{label:"自动模式",value:1},{label:"手动模式",value:0}],formImage:{src_id:0,image_attr:{isp_auto_mode:0,sharpness_val:10,brightness_val:10,contrast_val:10,saturation_val:10},ldc_attr:{ldc_support:!1,ldc_enable:!1,aspect:!1,x_ratio:0,y_ratio:0,xy_ratio:0,distor_ratio:0},dis_attr:{dis_support:!1,dis_enable:!1}},formImageRules:{}}},created(){console.log("image ++"),this.getInfo()},methods:{onSubmit(){this.$refs.formImageRef.validate((async e=>{if(!e)return!1;try{const{data:e}=await this.$http.post("setting/image",this.formImage);console.log("image get return: ",e),200===e.meta.status?this.$message.success("修改成功"):this.$message.error("修改失败")}catch(t){this.$message.error("修改失败")}this.getInfo()}))},async getInfo(){try{const{data:e}=await this.$http.get("setting/image",{params:{src_id:this.formImage.src_id}});console.log("image get return: ",e),200===e.meta.status&&(this.formImage.image_attr.isp_auto_mode=e.data.image_attr.isp_auto_mode,this.formImage.image_attr.sharpness_val=e.data.image_attr.sharpness,this.formImage.image_attr.brightness_val=e.data.image_attr.brightness,this.formImage.image_attr.contrast_val=e.data.image_attr.contrast,this.formImage.image_attr.saturation_val=e.data.image_attr.saturation,this.formImage.ldc_attr.ldc_support=e.data.ldc_attr.ldc_support,this.formImage.ldc_attr.ldc_enable=e.data.ldc_attr.ldc_enable,this.formImage.ldc_attr.aspect=e.data.ldc_attr.aspect,this.formImage.ldc_attr.x_ratio=e.data.ldc_attr.x_ratio,this.formImage.ldc_attr.y_ratio=e.data.ldc_attr.y_ratio,this.formImage.ldc_attr.xy_ratio=e.data.ldc_attr.xy_ratio,this.formImage.ldc_attr.distor_ratio=1*e.data.ldc_attr.distor_ratio,this.formImage.dis_attr.dis_support=e.data.dis_attr.dis_support,this.formImage.dis_attr.dis_enable=e.data.dis_attr.dis_enable)}catch(e){this.$message.error("获取信息失败")}},onChangeSrcID(){this.getInfo()},onChangeImgAttrValue(){this.$refs.formImageRef.validate((async e=>{if(!e)return!1;try{const{data:e}=await this.$http.post("setting/image",this.formImage);console.log("image get return: ",e),e.meta.status}catch(t){}}))}}},s=o,l=a(3736),n=(0,l.Z)(s,i,r,!1,null,"73b209b4",null),m=n.exports},1076:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var i=function(){var e=this,t=e._self._c;return t("div",[t("el-container",[t("el-container",[t("el-aside",{staticClass:"preview_container",attrs:{width:"600px"}},[t("div",{staticClass:"videoContainer",attrs:{id:"videoContainer"}},[t("div",{ref:"osdVideoRef",staticClass:"osdVideo",attrs:{id:"osdVideo"}},[t("video",{directives:[{name:"show",rawName:"v-show",value:this.showVideo,expression:"this.showVideo"}],ref:"axVideoRef",staticClass:"axVideo",attrs:{id:"myVideo",autoplay:"",muted:"",playsinline:"",oncontextmenu:"return false;"},domProps:{muted:!0}}),t("canvas",{directives:[{name:"show",rawName:"v-show",value:!this.showVideo,expression:"!!!this.showVideo"}],staticClass:"axVideoMJpeg",attrs:{id:"myMjpeg",width:"600px",height:"400px"}})]),t("div",{staticClass:"osdBound",attrs:{id:"osdBound"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:this.formOverlay.overlay_attr[this.chn_cur].time.enable,expression:"this.formOverlay.overlay_attr[this.chn_cur].time.enable"}],staticClass:"targetOSDTime",attrs:{id:"targetOSDTime"}},[t("canvas",{directives:[{name:"show",rawName:"v-show",value:this.formOverlay.overlay_attr[this.chn_cur].time.enable,expression:"this.formOverlay.overlay_attr[this.chn_cur].time.enable"}],staticClass:"osdTime",attrs:{id:"osdTime",width:"600px",height:"400px"}})]),t("div",{directives:[{name:"show",rawName:"v-show",value:this.formOverlay.overlay_attr[this.chn_cur].logo.enable,expression:"this.formOverlay.overlay_attr[this.chn_cur].logo.enable"}],staticClass:"targetOSDLogo",attrs:{id:"targetOSDLogo"}},[t("canvas",{directives:[{name:"show",rawName:"v-show",value:this.formOverlay.overlay_attr[this.chn_cur].logo.enable,expression:"this.formOverlay.overlay_attr[this.chn_cur].logo.enable"}],staticClass:"osdLogo",attrs:{id:"osdLogo",width:"600px",height:"400px"}})]),t("div",{directives:[{name:"show",rawName:"v-show",value:this.formOverlay.overlay_attr[this.chn_cur].channel.enable,expression:"this.formOverlay.overlay_attr[this.chn_cur].channel.enable"}],staticClass:"targetOSDChannel",attrs:{id:"targetOSDChannel"}},[t("canvas",{directives:[{name:"show",rawName:"v-show",value:this.formOverlay.overlay_attr[this.chn_cur].channel.enable,expression:"this.formOverlay.overlay_attr[this.chn_cur].channel.enable"}],staticClass:"osdChannel",attrs:{id:"osdChannel",width:"600px",height:"400px"}})]),t("div",{directives:[{name:"show",rawName:"v-show",value:this.formOverlay.overlay_attr[this.chn_cur].location.enable,expression:"this.formOverlay.overlay_attr[this.chn_cur].location.enable"}],staticClass:"targetOSDLocation",attrs:{id:"targetOSDLocation"}},[t("canvas",{directives:[{name:"show",rawName:"v-show",value:this.formOverlay.overlay_attr[this.chn_cur].location.enable,expression:"this.formOverlay.overlay_attr[this.chn_cur].location.enable"}],staticClass:"osdLocation",attrs:{id:"osdLocation",width:"600px",height:"400px"}})]),t("div",{directives:[{name:"show",rawName:"v-show",value:this.formOverlay.privacy_attr.enable,expression:"this.formOverlay.privacy_attr.enable"}],staticClass:"targetOSDPrivacy",attrs:{id:"targetOSDPrivacy"}},[t("canvas",{directives:[{name:"show",rawName:"v-show",value:this.formOverlay.privacy_attr.enable,expression:"this.formOverlay.privacy_attr.enable"}],staticClass:"osdPrivacy",attrs:{id:"osdPrivacy",width:"600px",height:"400px"}})]),t("div",{directives:[{name:"show",rawName:"v-show",value:this.formOverlay.privacy_attr.enable,expression:"this.formOverlay.privacy_attr.enable"}],staticClass:"targetOSDPrivacyPt0",attrs:{id:"targetOSDPrivacyPt0"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:this.formOverlay.privacy_attr.enable,expression:"this.formOverlay.privacy_attr.enable"}],staticClass:"targetOSDPrivacyPt1",attrs:{id:"targetOSDPrivacyPt1"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:this.formOverlay.privacy_attr.enable&&0!=this.formOverlay.privacy_attr.type,expression:"this.formOverlay.privacy_attr.enable && this.formOverlay.privacy_attr.type != 0"}],staticClass:"targetOSDPrivacyPt2",attrs:{id:"targetOSDPrivacyPt2"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:this.formOverlay.privacy_attr.enable&&0!=this.formOverlay.privacy_attr.type,expression:"this.formOverlay.privacy_attr.enable && this.formOverlay.privacy_attr.type != 0"}],staticClass:"targetOSDPrivacyPt3",attrs:{id:"targetOSDPrivacyPt3"}})])])]),t("el-main",{staticClass:"osdSetting"},[t("div",[t("el-form",{attrs:{"label-width":"88px"}},[t("el-form-item",{attrs:{label:"Camera:"}},[t("el-select",{staticClass:"Camera",attrs:{size:"mini",disabled:0==e.dual_mode},on:{change:e.onChangeSrcID},model:{value:e.formOverlay.src_id,callback:function(t){e.$set(e.formOverlay,"src_id",t)},expression:"formOverlay.src_id"}},e._l(Array.from({length:2},((e,t)=>t)),(function(e){return t("el-option",{key:e,attrs:{label:""+e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"视频通道:"}},[t("el-select",{staticClass:"chnVideo",attrs:{size:"mini"},on:{change:e.changeStream},model:{value:e.chn_cur,callback:function(t){e.chn_cur=t},expression:"chn_cur"}},e._l(e.streamOptions[this.formOverlay.src_id],(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.id}})})),1)],1)],1),t("el-divider"),t("el-tabs",{staticStyle:{height:"200px"},attrs:{"tab-position":"left"}},[t("el-tab-pane",{attrs:{label:"时间标题"}},[t("el-form",{ref:"formOverlayRef",attrs:{rules:e.formOverlayRules,model:e.formOverlay.overlay_attr[e.chn_cur],"label-width":"100px"}},[t("el-form-item",{attrs:{label:"显示："}},[t("el-switch",{model:{value:e.formOverlay.overlay_attr[e.chn_cur].time.enable,callback:function(t){e.$set(e.formOverlay.overlay_attr[e.chn_cur].time,"enable",t)},expression:"formOverlay.overlay_attr[chn_cur].time.enable"}})],1),t("el-form-item",{attrs:{label:"颜色："}},[t("el-select",{attrs:{size:"mini",disabled:!e.formOverlay.overlay_attr[e.chn_cur].time.enable},model:{value:e.formOverlay.overlay_attr[e.chn_cur].time.color,callback:function(t){e.$set(e.formOverlay.overlay_attr[e.chn_cur].time,"color",t)},expression:"formOverlay.overlay_attr[chn_cur].time.color"}},e._l(e.colorOptions,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"启用反色："}},[t("el-switch",{attrs:{disabled:!e.formOverlay.overlay_attr[e.chn_cur].time.enable},model:{value:e.formOverlay.overlay_attr[e.chn_cur].time.inverse_enable,callback:function(t){e.$set(e.formOverlay.overlay_attr[e.chn_cur].time,"inverse_enable",t)},expression:"formOverlay.overlay_attr[chn_cur].time.inverse_enable"}})],1),t("el-form-item",{attrs:{label:"反色颜色："}},[t("el-select",{attrs:{size:"mini",disabled:!e.formOverlay.overlay_attr[e.chn_cur].time.enable},model:{value:e.formOverlay.overlay_attr[e.chn_cur].time.color_inv,callback:function(t){e.$set(e.formOverlay.overlay_attr[e.chn_cur].time,"color_inv",t)},expression:"formOverlay.overlay_attr[chn_cur].time.color_inv"}},e._l(e.colorOptions,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),t("el-tab-pane",{attrs:{label:"位置标题"}},[t("el-form",{ref:"formOverlayRef",attrs:{rules:e.formOverlayRules,model:e.formOverlay.overlay_attr[e.chn_cur],"label-width":"100px"}},[t("el-form-item",{attrs:{label:"显示："}},[t("el-switch",{model:{value:e.formOverlay.overlay_attr[e.chn_cur].location.enable,callback:function(t){e.$set(e.formOverlay.overlay_attr[e.chn_cur].location,"enable",t)},expression:"formOverlay.overlay_attr[chn_cur].location.enable"}})],1),t("el-form-item",{attrs:{label:"颜色："}},[t("el-select",{attrs:{size:"mini",disabled:!e.formOverlay.overlay_attr[e.chn_cur].location.enable},model:{value:e.formOverlay.overlay_attr[e.chn_cur].location.color,callback:function(t){e.$set(e.formOverlay.overlay_attr[e.chn_cur].location,"color",t)},expression:"formOverlay.overlay_attr[chn_cur].location.color"}},e._l(e.colorOptions,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"内容："}},[t("el-input",{attrs:{size:"mini",maxlength:"128",disabled:!e.formOverlay.overlay_attr[e.chn_cur].location.enable},on:{input:e.onLocationTextChanged},model:{value:e.formOverlay.overlay_attr[e.chn_cur].location.text,callback:function(t){e.$set(e.formOverlay.overlay_attr[e.chn_cur].location,"text",t)},expression:"formOverlay.overlay_attr[chn_cur].location.text"}})],1),t("el-form-item",{attrs:{label:"启用反色："}},[t("el-switch",{attrs:{disabled:!e.formOverlay.overlay_attr[e.chn_cur].location.enable},model:{value:e.formOverlay.overlay_attr[e.chn_cur].location.inverse_enable,callback:function(t){e.$set(e.formOverlay.overlay_attr[e.chn_cur].location,"inverse_enable",t)},expression:"formOverlay.overlay_attr[chn_cur].location.inverse_enable"}})],1),t("el-form-item",{attrs:{label:"反色颜色："}},[t("el-select",{attrs:{size:"mini",disabled:!e.formOverlay.overlay_attr[e.chn_cur].location.enable},model:{value:e.formOverlay.overlay_attr[e.chn_cur].location.color_inv,callback:function(t){e.$set(e.formOverlay.overlay_attr[e.chn_cur].location,"color_inv",t)},expression:"formOverlay.overlay_attr[chn_cur].location.color_inv"}},e._l(e.colorOptions,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),t("el-tab-pane",{attrs:{label:"图标标题"}},[t("el-form",{ref:"formOverlayRef",attrs:{rules:e.formOverlayRules,model:e.formOverlay.overlay_attr[e.chn_cur],"label-width":"100px"}},[t("el-form-item",{attrs:{label:"显示："}},[t("el-switch",{model:{value:e.formOverlay.overlay_attr[e.chn_cur].logo.enable,callback:function(t){e.$set(e.formOverlay.overlay_attr[e.chn_cur].logo,"enable",t)},expression:"formOverlay.overlay_attr[chn_cur].logo.enable"}})],1)],1)],1),t("el-tab-pane",{attrs:{label:"通道标题"}},[t("el-form",{ref:"formOverlayRef",attrs:{rules:e.formOverlayRules,model:e.formOverlay.overlay_attr[e.chn_cur],"label-width":"100px"}},[t("el-form-item",{attrs:{label:"显示："}},[t("el-switch",{model:{value:e.formOverlay.overlay_attr[e.chn_cur].channel.enable,callback:function(t){e.$set(e.formOverlay.overlay_attr[e.chn_cur].channel,"enable",t)},expression:"formOverlay.overlay_attr[chn_cur].channel.enable"}})],1),t("el-form-item",{attrs:{label:"颜色："}},[t("el-select",{attrs:{size:"mini",disabled:!e.formOverlay.overlay_attr[e.chn_cur].channel.enable},model:{value:e.formOverlay.overlay_attr[e.chn_cur].channel.color,callback:function(t){e.$set(e.formOverlay.overlay_attr[e.chn_cur].channel,"color",t)},expression:"formOverlay.overlay_attr[chn_cur].channel.color"}},e._l(e.colorOptions,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"内容："}},[t("el-input",{attrs:{size:"mini",maxlength:"128",disabled:!e.formOverlay.overlay_attr[e.chn_cur].channel.enable},on:{input:e.onChannelTextChanged},model:{value:e.formOverlay.overlay_attr[e.chn_cur].channel.text,callback:function(t){e.$set(e.formOverlay.overlay_attr[e.chn_cur].channel,"text",t)},expression:"formOverlay.overlay_attr[chn_cur].channel.text"}})],1),t("el-form-item",{attrs:{label:"启用反色："}},[t("el-switch",{attrs:{disabled:!e.formOverlay.overlay_attr[e.chn_cur].channel.enable},model:{value:e.formOverlay.overlay_attr[e.chn_cur].channel.inverse_enable,callback:function(t){e.$set(e.formOverlay.overlay_attr[e.chn_cur].channel,"inverse_enable",t)},expression:"formOverlay.overlay_attr[chn_cur].channel.inverse_enable"}})],1),t("el-form-item",{attrs:{label:"反色颜色："}},[t("el-select",{attrs:{size:"mini",disabled:!e.formOverlay.overlay_attr[e.chn_cur].channel.enable},model:{value:e.formOverlay.overlay_attr[e.chn_cur].channel.color_inv,callback:function(t){e.$set(e.formOverlay.overlay_attr[e.chn_cur].channel,"color_inv",t)},expression:"formOverlay.overlay_attr[chn_cur].channel.color_inv"}},e._l(e.colorOptions,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),t("el-tab-pane",{attrs:{label:"隐私遮挡"}},[t("el-form",{ref:"formOverlayRef",attrs:{rules:e.formOverlayRules,model:e.formOverlay.overlay_attr[e.chn_cur],"label-width":"100px"}},[t("el-form-item",{attrs:{label:"显示："}},[t("el-switch",{model:{value:e.formOverlay.privacy_attr.enable,callback:function(t){e.$set(e.formOverlay.privacy_attr,"enable",t)},expression:"formOverlay.privacy_attr.enable"}})],1),t("el-form-item",{attrs:{label:"类型："}},[t("el-select",{attrs:{size:"mini",disabled:!e.formOverlay.privacy_attr.enable},on:{change:e.onChangePrvType},model:{value:e.formOverlay.privacy_attr.type,callback:function(t){e.$set(e.formOverlay.privacy_attr,"type",t)},expression:"formOverlay.privacy_attr.type"}},e._l(e.privacyTypeOptions,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formOverlay.privacy_attr.type!=e.OSD_PRIVACY_TYPE_MOSA,expression:"formOverlay.privacy_attr.type != OSD_PRIVACY_TYPE_MOSA"}],attrs:{label:"线宽："}},[t("el-select",{attrs:{size:"mini",disabled:!e.formOverlay.privacy_attr.enable},model:{value:e.formOverlay.privacy_attr.linewidth,callback:function(t){e.$set(e.formOverlay.privacy_attr,"linewidth",t)},expression:"formOverlay.privacy_attr.linewidth"}},e._l(Array.from({length:5},((e,t)=>t+1)),(function(e){return t("el-option",{key:e,attrs:{label:""+e,value:e}})})),1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formOverlay.privacy_attr.type==e.OSD_PRIVACY_TYPE_MOSA,expression:"formOverlay.privacy_attr.type == OSD_PRIVACY_TYPE_MOSA"}],attrs:{label:"大小："}},[t("el-select",{attrs:{size:"mini",disabled:!e.formOverlay.privacy_attr.enable},model:{value:e.formOverlay.privacy_attr.linewidth,callback:function(t){e.$set(e.formOverlay.privacy_attr,"linewidth",t)},expression:"formOverlay.privacy_attr.linewidth"}},e._l(Array.from({length:5},((e,t)=>t+1)),(function(e){return t("el-option",{key:e,attrs:{label:""+e,value:e}})})),1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formOverlay.privacy_attr.type!=e.OSD_PRIVACY_TYPE_MOSA,expression:"formOverlay.privacy_attr.type != OSD_PRIVACY_TYPE_MOSA"}],attrs:{label:"颜色："}},[t("el-select",{attrs:{size:"mini",disabled:!e.formOverlay.privacy_attr.enable},model:{value:e.formOverlay.privacy_attr.color,callback:function(t){e.$set(e.formOverlay.privacy_attr,"color",t)},expression:"formOverlay.privacy_attr.color"}},e._l(e.colorOptions,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formOverlay.privacy_attr.type!=e.OSD_PRIVACY_TYPE_MOSA,expression:"formOverlay.privacy_attr.type != OSD_PRIVACY_TYPE_MOSA"}],attrs:{label:"填充："}},[t("el-switch",{model:{value:e.formOverlay.privacy_attr.solid,callback:function(t){e.$set(e.formOverlay.privacy_attr,"solid",t)},expression:"formOverlay.privacy_attr.solid"}})],1)],1)],1)],1)],1)])],1),t("el-footer",{staticClass:"overlayFooter"},[t("el-divider",{staticClass:"divider"}),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onSubmit}},[e._v("修改")])],1)],1)],1)},r=[],o=(a(7658),a(4053)),s=a.n(o),l={props:["dual_mode"],data(){return{blockOptions:[8,16,64],rotationOptions:[0,90,180,270],colorOptions:[{label:"白色",value:"0xFFFFFF"},{label:"黑色",value:"0x000000"},{label:"绿色",value:"0x00FF00"},{label:"红色",value:"0xFF0000"},{label:"蓝色",value:"0x0000FF"},{label:"黄色",value:"0xFFFF00"},{label:"紫色",value:"0xFF00FF"}],cameraOptions:[0,1],streamOptions:[[{label:"主码流0",value:0,mediaType:"H264Raw",mediaFPS:25},{label:"子码流1",value:1,mediaType:"H264Raw",mediaFPS:25}],[{label:"主码流0",value:0,mediaType:"H264Raw",mediaFPS:25},{label:"子码流1",value:1,mediaType:"H264Raw",mediaFPS:25}]],OSD_PRIVACY_TYPE_LINE:0,OSD_PRIVACY_TYPE_RECT:1,OSD_PRIVACY_TYPE_POLY:2,OSD_PRIVACY_TYPE_MOSA:3,privacyTypeOptions:[{label:"直线",value:0},{label:"矩形",value:1},{label:"四边形",value:2},{label:"马赛克",value:3}],showVideo:!0,videoDispW:0,videoDispH:0,chn_cur:0,max_try_num:3,OSD_ALIGN_TYPE_LEFT_TOP:0,OSD_ALIGN_TYPE_RIGHT_TOP:1,OSD_ALIGN_TYPE_LEFT_BOTTOM:2,OSD_ALIGN_TYPE_RIGHT_BOTTOM:3,mjpeg_cxt:{isDrawImg:!0,mjpeg_w:0,mjpeg_h:0,sizeOptionInd:0,getObjectFitSize:this.getObjectFitSize,timer_draw:void 0},formOverlay:{src_id:0,overlay_attr:[{video:{id:0,width:2688,height:1520},time:{enable:!0,color:"0xFFFFFF",fontsize:0,align:this.OSD_ALIGN_TYPE_LEFT_TOP,inverse_enable:!1,color_inv:"0x000000",rect:[.02,.02,.4,.06]},logo:{enable:!0,align:this.OSD_ALIGN_TYPE_RIGHT_BOTTOM,rect:[.88,.88,.1,.1]},channel:{enable:!1,text:"channel",color:"0xFFFFFF",fontsize:0,align:this.OSD_ALIGN_TYPE_RIGHT_TOP,inverse_enable:!1,color_inv:"0x000000",rect:[.56,.02,.4,.06]},location:{enable:!1,text:"location",color:"0xFFFFFF",fontsize:0,align:this.OSD_ALIGN_TYPE_LEFT_BOTTOM,inverse_enable:!1,color_inv:"0x000000",rect:[.02,.88,.4,.06]}},{video:{id:0,width:720,height:576},time:{enable:!0,color:"0xFFFFFF",fontsize:0,format:0,inverse_enable:!1,color_inv:"0x000000",rect:[.02,.02,.4,.06]},logo:{enable:!0,rect:[.88,.88,.1,.1]},channel:{enable:!1,text:"channel",color:"0xFFFFFF",fontsize:0,inverse_enable:!1,color_inv:"0x000000",rect:[.56,.02,.4,.06]},location:{enable:!1,text:"location",color:"0xFFFFFF",fontsize:0,inverse_enable:!1,color_inv:"0x000000",rect:[.02,.88,.4,.06]}}],privacy_attr:{enable:!1,type:0,color:"0xFFFFFF",linewidth:2,solid:!1,rect:[.02,.88,.4,.06],sourceResolution:[0,0]}},formOverlayRules:{}}},created(){console.log("overlay created ++"),this.getInfo(),console.log("overlay created --")},mounted(){console.log("overlay mounted ++"),this.getVideoInfo(),this.$nextTick((function(){this.resize_canvas()})),window.addEventListener("visibilitychange",(()=>{this.showVideo&&this.wfsObj&&this.wfsObj.playerSeekNow()})),window.addEventListener("resize",(()=>{this.wfsObj&&"visible"===window.visibilityState&&this.resize_canvas()})),this.dragElement(targetOSDTime,{bounding:osdBound,index:0,onEnd:this.onOsdDragEnd}),this.dragElement(targetOSDChannel,{bounding:osdBound,index:1,onEnd:this.onOsdDragEnd}),this.dragElement(targetOSDLogo,{bounding:osdBound,index:2,onEnd:this.onOsdDragEnd}),this.dragElement(targetOSDLocation,{bounding:osdBound,index:3,onEnd:this.onOsdDragEnd}),this.dragElement(targetOSDPrivacy,{bounding:osdBound,index:4,onEnd:this.onOsdDragEnd}),this.dragElement(targetOSDPrivacyPt0,{bounding:osdBound,index:5,onEnd:this.onOsdDragEnd}),this.dragElement(targetOSDPrivacyPt1,{bounding:osdBound,index:6,onEnd:this.onOsdDragEnd}),this.dragElement(targetOSDPrivacyPt2,{bounding:osdBound,index:7,onEnd:this.onOsdDragEnd}),this.dragElement(targetOSDPrivacyPt3,{bounding:osdBound,index:8,onEnd:this.onOsdDragEnd}),console.log("overlay mounted --")},destroyed(){this.stopPreview()},methods:{startPreview(){this.startPlay()},stopPreview(){this.isForceStop=!0,this.stop()},async startPlay(){for(var e=!1,t=0;t<this.max_try_num;t++){if(e)break;try{await this.changeStream(this.chn_cur+"",!1,!1),this.play(),e=!0}catch(a){e=!1,console.log("startPlay catch except: "+a)}}e||this.$message.error("网络请求码流失败")},play(){console.log("play ++");try{this.stop();const e=window.sessionStorage.getItem("token"),t=document.getElementById("myVideo"),a=document.getElementById("myMjpeg");let i=this.streamOptions[this.formOverlay.src_id][this.chn_cur].mediaType,r=this.streamOptions[this.formOverlay.src_id][this.chn_cur].mediaFPS,o=this.mjpeg_cxt;if(this.showVideo=s().canPlayByVideo(i),s().isSupported()){let l={wsMinPacketInterval:2e3,wsMaxPacketInterval:8e3,fps:r},n={video:t,ctx:a};this.wfsObj=new(s())(l);let m=this.formOverlay.src_id;this.wfsObj.attachMedia(n,"ch"+m,i,"ws/preview_"+m+"?token="+e,o),this.wfsObj.on(s().Events.ERROR,((e,t)=>this.handleWfsEvent(e,t))),"MJPEG"==i&&this.resize_canvas()}else console.log("wfs is not supported")}catch(e){console.log("play catch except: "+e)}console.log("play --")},stop(){console.log("stop ++"),null!=this.wfsObj&&(this.wfsObj.destroy(),this.wfsObj=null),console.log("stop --")},handleWfsEvent(e,t){try{if(t.fatal){switch(this.isError=!0,console.warn("Fatal error :"+t.details),t.type){case s().ErrorTypes.MEDIA_ERROR:console.log("a media error occurred");break;case s().ErrorTypes.NETWORK_ERROR:console.log("a network error occurred");break;default:console.log("an unrecoverable error occurred");break}this.play()}}catch(a){console.log("handleWfsEvent catch except: "+a.description)}},resize_canvas(){try{var e=document.getElementById("myMjpeg");e&&(this.mjpeg_cxt.mjpeg_w=this.$refs.osdVideoRef.width,this.mjpeg_cxt.mjpeg_h=this.$refs.osdVideoRef.height,this.mjpeg_cxt.mjpeg_w=600,this.mjpeg_cxt.mjpeg_h=400,e.setAttribute("width",this.mjpeg_cxt.mjpeg_w),e.setAttribute("height",this.mjpeg_cxt.mjpeg_h),console.log("mjpeg_cxt canvas_w="+this.mjpeg_cxt.mjpeg_w+", canvas_h ="+this.mjpeg_cxt.mjpeg_h),this.mjpeg_cxt.isDrawImg=!1,this.mjpeg_cxt.timer_draw&&clearInterval(this.mjpeg_cxt.timer_draw),this.mjpeg_cxt.timer_draw=setInterval((()=>{this.mjpeg_cxt.isDrawImg=!0,clearInterval(this.mjpeg_cxt.timer_draw)}),300))}catch(t){console.log("resize_canvas except: "+t)}},async onSubmit(){try{var e="setting/overlay";console.log("setting/overlay"+this.formOverlay);const{data:t}=await this.$http.post(e,this.formOverlay);console.log("overlay post return: ",t),200===t.meta.status?this.$message.success("修改成功"):this.$message.success("修改失败"),this.onFresh()}catch(t){this.$message.error("修改失败")}},async onFresh(){console.log("onFresh ++"),this.getInfo(),console.log("onFresh --")},async getInfo(){console.log("getInfo ++");try{var e="setting/overlay";const{data:t}=await this.$http.get(e,{params:{src_id:this.formOverlay.src_id}});console.log("overlay get return: ",t),200===t.meta.status&&(this.formOverlay.overlay_attr=t.data.overlay_attr,this.formOverlay.privacy_attr=t.data.privacy_attr,console.log("overlay get srcid: ",this.formOverlay.src_id),this.resize_canvas(),this.drawOSDTime(),this.drawOSDLogo(),this.drawOSDChannel(),this.drawOSDLocation(),this.drawOSDPrivacy())}catch(t){console.log("获取信息失败"+t),this.$message.error("获取信息失败")}console.log("getInfo --")},async changeStream(e,t=!0,a=!0){console.log("changeStream ++");const i=Number(e);console.log("change stream to "+i);const{data:r}=await this.$http.post("preview/stream",{src_id:this.formOverlay.src_id,stream:i});if(console.log("post stream return: ",r),!r||200!==r.meta.status)return this.$message.error("设置码流失败");a&&(this.chn_cur=i,window.localStorage.setItem("stream_"+this.formOverlay.src_id,this.streamOptions[this.formOverlay.src_id][i].id)),t&&(this.play(),this.drawOSDTime(),this.drawOSDLogo(),this.drawOSDChannel(),this.drawOSDLocation(),this.drawOSDPrivacy()),console.log("changeStream --")},async getVideoInfo(){try{const{data:i}=await this.$http.get("preview/info");if(console.log("preview info get return: ",i),200===i.meta.status){this.sns_num=i.data.info.sns_num,this.streamOptions=[[],[]];for(var e=0;e<i.data.info.stream0_list.length;e++){var t=i.data.info.stream0_list[e],a={id:t,label:0===t?"主码流0":"子码流"+t,icon:"el-icon-full-screen",mediaType:this.getMediatype(i.data.info.sns0_codec[e]),mediaFPS:i.data.info.sns0_video_fps[e]};this.streamOptions[0].push(a)}if(this.sns_num>1)for(e=0;e<i.data.info.stream1_list.length;e++){t=i.data.info.stream1_list[e],a={id:t,label:0===t?"主码流0":"子码流"+t,icon:"el-icon-full-screen",mediaType:this.getMediatype(i.data.info.sns1_codec[e]),mediaFPS:i.data.info.sns1_video_fps[e]};this.streamOptions[1].push(a)}this.mjpeg_cxt.sizeOptionInd=0,this.mjpeg_cxt.getObjectFitSize=this.getObjectFitSize,this.startPreview()}}catch(i){this.$message.error("获取信息失败")}},getMediatype(e){return 0===e?"H264Raw":1===e?"MJPEG":2===e?"H265Raw":"H264Raw"},getObjectFitSize(e=0,t,a,i,r){let o=1,s=0,l=0,n=i,m=r,c=0,d=0,_=t,v=a,p=t/a,f=i/r;return 0===e?f>=p?(o=a/r,s=(i-t/o)/2,n=t/o,m=r):(o=t/i,l=(r-a/o)/2,n=i,m=a/o):1===e&&(f>=p?(o=t/i,d=(a-r*o)/2,v=r*o):(o=a/r,c=(t-i*o)/2,_=i*o)),{sx:s,sy:l,swidth:n,sheight:m,x:c,y:d,width:_,height:v}},onChangeSrcID(){this.getInfo(),this.startPreview()},onChannelTextChanged(){this.drawOSDChannel()},onLocationTextChanged(){this.drawOSDLocation()},drawOSDTime(){console.log("drawOSDTime ..");try{var e=document.getElementById("osdBound").getBoundingClientRect(),t=this.formOverlay.overlay_attr[this.chn_cur].time.rect[0]/this.formOverlay.overlay_attr[this.chn_cur].video.width*e.width,a=this.formOverlay.overlay_attr[this.chn_cur].time.rect[1]/this.formOverlay.overlay_attr[this.chn_cur].video.height*e.height,i=this.formOverlay.overlay_attr[this.chn_cur].time.rect[2]/this.formOverlay.overlay_attr[this.chn_cur].video.width*e.width,r=this.formOverlay.overlay_attr[this.chn_cur].time.rect[3]/this.formOverlay.overlay_attr[this.chn_cur].video.height*e.height;t=t<e.width?t:e.width-2,a=a<e.height?a:e.height-2,console.log("time pos:  w="+i+" h = "+r+"boundW= "+e.width+"boundH= "+e.height),i=t+i<=e.width?i:e.width-t,r=a+r<=e.height?r:e.height-r;var o=document.getElementById("targetOSDTime");o.style.left=t+"px",o.style.top=a+"px",o.style.width=i+"px",o.style.height=r+"px",console.log("time pos: x="+t+", y="+a+", w="+i+", h="+r);var s=document.getElementById("osdTime"),l=s.getContext("2d");l.clearRect(0,0,s.width,s.height),l.font=r-8+"px Arial Narrow",console.log("font="+l.font),l.fillStyle="red",l.fillText("XXXX-XX-XX XX:XX:XX",1,r-8)}catch(n){console.log("drawOSDLogo: "+n)}},drawOSDLogo(){console.log("drawOSDLogo ..");try{var e=document.getElementById("osdBound").getBoundingClientRect(),t=this.formOverlay.overlay_attr[this.chn_cur].logo.rect[0]/this.formOverlay.overlay_attr[this.chn_cur].video.width*e.width,a=this.formOverlay.overlay_attr[this.chn_cur].logo.rect[1]/this.formOverlay.overlay_attr[this.chn_cur].video.height*e.height,i=this.formOverlay.overlay_attr[this.chn_cur].logo.rect[2]/this.formOverlay.overlay_attr[this.chn_cur].video.width*e.width,r=this.formOverlay.overlay_attr[this.chn_cur].logo.rect[3]/this.formOverlay.overlay_attr[this.chn_cur].video.height*e.height;t=t<e.width?t:e.width-2,a=a<e.height?a:e.height-2,i=t+i<e.width?i:e.width-t,r=a+r<e.height?r:e.height-r;var o=document.getElementById("targetOSDLogo");o.style.left=t+"px",o.style.top=a+"px",o.style.width=i+"px",o.style.height=r+"px",console.log("logo pos: x="+t+", y="+a+", w="+i+", h="+r)}catch(s){console.log("drawOSDLogo: "+s)}},drawOSDLocation(){console.log("drawOSDLocation ..");try{var e=document.getElementById("osdBound").getBoundingClientRect(),t=this.formOverlay.overlay_attr[this.chn_cur].location.rect[0]/this.formOverlay.overlay_attr[this.chn_cur].video.width*e.width,a=this.formOverlay.overlay_attr[this.chn_cur].location.rect[1]/this.formOverlay.overlay_attr[this.chn_cur].video.height*e.height,i=this.formOverlay.overlay_attr[this.chn_cur].location.rect[2]/this.formOverlay.overlay_attr[this.chn_cur].video.width*e.width,r=this.formOverlay.overlay_attr[this.chn_cur].location.rect[3]/this.formOverlay.overlay_attr[this.chn_cur].video.height*e.height;t=t<e.width?t:e.width-1,a=a<e.height?a:e.height-1,i=t+i<e.width?i:e.width-t,r=a+r<e.height?r:e.height-r;var o=document.getElementById("targetOSDLocation");o.style.left=t+"px",o.style.top=a+"px",o.style.width=i+"px",o.style.height=r+"px",console.log("location pos: x="+t+", y="+a+", w="+i+", h="+r);var s=document.getElementById("osdLocation"),l=s.getContext("2d");l.clearRect(0,0,s.width,s.height),l.font=r-2+"px Arial Narrow",l.fillStyle="red",l.fillText(this.formOverlay.overlay_attr[this.chn_cur].location.text,1,r-2)}catch(n){console.log("drawOSDLocation: "+n)}},drawOSDChannel(){console.log("drawOSDChannel ..");try{var e=document.getElementById("osdBound").getBoundingClientRect(),t=this.formOverlay.overlay_attr[this.chn_cur].channel.rect[0]/this.formOverlay.overlay_attr[this.chn_cur].video.width*e.width,a=this.formOverlay.overlay_attr[this.chn_cur].channel.rect[1]/this.formOverlay.overlay_attr[this.chn_cur].video.height*e.height,i=this.formOverlay.overlay_attr[this.chn_cur].channel.rect[2]/this.formOverlay.overlay_attr[this.chn_cur].video.width*e.width,r=this.formOverlay.overlay_attr[this.chn_cur].channel.rect[3]/this.formOverlay.overlay_attr[this.chn_cur].video.height*e.height;t=t<e.width?t:e.width-2,a=a<e.height?a:e.height-2,i=t+i<e.width?i:e.width-t,r=a+r<e.height?r:e.height-r;var o=document.getElementById("targetOSDChannel");o.style.left=t+"px",o.style.top=a+"px",o.style.width=i+"px",o.style.height=r+"px",console.log("channel pos: x="+t+", y="+a+", w="+i+", h="+r);var s=document.getElementById("osdChannel"),l=s.getContext("2d");l.clearRect(0,0,s.width,s.height),l.font=r-2+"px Arial Narrow",l.fillStyle="red";var n=this.formOverlay.overlay_attr[this.chn_cur].channel.text,m=l.measureText(n).width;l.fillText(n,i-m,r-2),console.log("channel str width: "+m)}catch(c){console.log("drawOSDLocation: "+c)}},drawOSDPrivacy(){try{var e,t,a,i,r=document.getElementById("osdBound").getBoundingClientRect(),o=this.formOverlay.privacy_attr.points[0][0]/this.formOverlay.privacy_attr.sourceResolution[0]*r.width,s=this.formOverlay.privacy_attr.points[0][1]/this.formOverlay.privacy_attr.sourceResolution[1]*r.height,l=this.formOverlay.privacy_attr.points[1][0]/this.formOverlay.privacy_attr.sourceResolution[0]*r.width,n=this.formOverlay.privacy_attr.points[1][1]/this.formOverlay.privacy_attr.sourceResolution[1]*r.height,m=this.formOverlay.privacy_attr.points[2][0]/this.formOverlay.privacy_attr.sourceResolution[0]*r.width,c=this.formOverlay.privacy_attr.points[2][1]/this.formOverlay.privacy_attr.sourceResolution[1]*r.height,d=this.formOverlay.privacy_attr.points[3][0]/this.formOverlay.privacy_attr.sourceResolution[0]*r.width,_=this.formOverlay.privacy_attr.points[3][1]/this.formOverlay.privacy_attr.sourceResolution[1]*r.height;if(o=o<r.width?o:r.width-2,s=s<r.height?s:r.height-2,l=l<r.width?l:r.width-2,n=n<r.height?n:r.height-2,m=m<r.width?m:r.width-2,c=c<r.height?c:r.height-2,d=d<r.width?d:r.width-2,_=_<r.height?_:r.height-2,this.formOverlay.privacy_attr.type===this.OSD_PRIVACY_TYPE_LINE){var v=[o,l],p=[s,n];e=Math.min.apply(null,v),t=Math.min.apply(null,p),a=Math.max.apply(null,v)-e,i=Math.max.apply(null,p)-t}else if(this.formOverlay.privacy_attr.type===this.OSD_PRIVACY_TYPE_POLY){v=[o,l,m,d],p=[s,n,c,_];e=Math.min.apply(null,v),t=Math.min.apply(null,p),a=Math.max.apply(null,v)-e,i=Math.max.apply(null,p)-t}else{v=[o,l,m,d],p=[s,n,c,_];o>l&&(o=d),s>_&&(s=n),d>m&&(m=l),n>c&&(c=_),e=o,t=s,a=m-o,i=c-s}var f=document.getElementById("targetOSDPrivacy");f.style.left=e+"px",f.style.top=t+"px",f.style.width=a+"px",f.style.height=i+"px";var h=document.getElementById("osdPrivacy");h.setAttribute("width",a),h.setAttribute("height",i);var u=h.getContext("2d");if(u.clearRect(0,0,h.width,h.height),u.fillStyle="red",this.formOverlay.privacy_attr.type===this.OSD_PRIVACY_TYPE_LINE){f=document.getElementById("targetOSDPrivacyPt0");f.style.left=o-2+"px",f.style.top=s-2+"px",f=document.getElementById("targetOSDPrivacyPt1"),f.style.left=l-2+"px",f.style.top=n-2+"px"}else if(this.formOverlay.privacy_attr.type===this.OSD_PRIVACY_TYPE_POLY){f=document.getElementById("targetOSDPrivacyPt0");f.style.left=o-2+"px",f.style.top=s-2+"px",f=document.getElementById("targetOSDPrivacyPt1"),f.style.left=l-2+"px",f.style.top=n-2+"px",f=document.getElementById("targetOSDPrivacyPt2"),f.style.left=m-2+"px",f.style.top=c-2+"px",f=document.getElementById("targetOSDPrivacyPt3"),f.style.left=d-2+"px",f.style.top=_-2+"px"}else{f=document.getElementById("targetOSDPrivacyPt0");f.style.left=e-2+"px",f.style.top=t-2+"px",this.formOverlay.privacy_attr.points[0][0]=e/r.width*this.formOverlay.privacy_attr.sourceResolution[0],this.formOverlay.privacy_attr.points[0][1]=t/r.height*this.formOverlay.privacy_attr.sourceResolution[1],f=document.getElementById("targetOSDPrivacyPt1"),f.style.left=e+a-2+"px",f.style.top=t-2+"px",this.formOverlay.privacy_attr.points[1][0]=(e+a)/r.width*this.formOverlay.privacy_attr.sourceResolution[0],this.formOverlay.privacy_attr.points[1][1]=t/r.height*this.formOverlay.privacy_attr.sourceResolution[1],f=document.getElementById("targetOSDPrivacyPt2"),f.style.left=e+a-2+"px",f.style.top=t+i-2+"px",this.formOverlay.privacy_attr.points[2][0]=(e+a)/r.width*this.formOverlay.privacy_attr.sourceResolution[0],this.formOverlay.privacy_attr.points[2][1]=(t+i)/r.height*this.formOverlay.privacy_attr.sourceResolution[1],f=document.getElementById("targetOSDPrivacyPt3"),f.style.left=e-2+"px",f.style.top=t+i-2+"px",this.formOverlay.privacy_attr.points[3][0]=e/r.width*this.formOverlay.privacy_attr.sourceResolution[0],this.formOverlay.privacy_attr.points[3][1]=(t+i)/r.height*this.formOverlay.privacy_attr.sourceResolution[1]}}catch(y){console.log("drawOSDPrivacy: "+y)}},onChangePrvType(){this.drawOSDPrivacy()},onOsdDragEnd(e,t){var a=document.getElementById("osdBound").getBoundingClientRect(),i=parseInt(parseInt(e.style.left)/a.width*this.formOverlay.overlay_attr[this.chn_cur].video.width),r=parseInt(parseInt(e.style.top)/a.height*this.formOverlay.overlay_attr[this.chn_cur].video.height),o=parseInt(parseInt(e.style.width)/a.width*this.formOverlay.overlay_attr[this.chn_cur].video.width),s=parseInt(parseInt(e.style.height)/a.height*this.formOverlay.overlay_attr[this.chn_cur].video.height);if(i=i<0?0:i,r=r<0?0:r,0===t)this.formOverlay.overlay_attr[this.chn_cur].time.rect=[i,r,o,s],console.log("update time rect: "+this.formOverlay.overlay_attr[this.chn_cur].time.rect);else if(1===t)this.formOverlay.overlay_attr[this.chn_cur].channel.rect=[i,r,o,s],console.log("update channel rect: "+this.formOverlay.overlay_attr[this.chn_cur].channel.rect);else if(2===t)this.formOverlay.overlay_attr[this.chn_cur].logo.rect=[i,r,o,s],console.log("update logo rect: "+this.formOverlay.overlay_attr[this.chn_cur].logo.rect);else if(3===t)this.formOverlay.overlay_attr[this.chn_cur].location.rect=[i,r,o,s],console.log("update location rect: "+this.formOverlay.overlay_attr[this.chn_cur].location.rect);else if(t>=4&&t<=8){i=parseInt(parseInt(e.style.left)/a.width*this.formOverlay.privacy_attr.sourceResolution[0]),r=parseInt(parseInt(e.style.top)/a.height*this.formOverlay.privacy_attr.sourceResolution[1]),o=parseInt(parseInt(e.style.width)/a.width*this.formOverlay.privacy_attr.sourceResolution[0]),s=parseInt(parseInt(e.style.height)/a.height*this.formOverlay.privacy_attr.sourceResolution[1]);var l=this.formOverlay.privacy_attr.points[0][0],n=this.formOverlay.privacy_attr.points[0][1],m=this.formOverlay.privacy_attr.points[1][0],c=this.formOverlay.privacy_attr.points[1][1],d=this.formOverlay.privacy_attr.points[2][0],_=this.formOverlay.privacy_attr.points[2][1],v=this.formOverlay.privacy_attr.points[3][0],p=this.formOverlay.privacy_attr.points[3][1];if(4===t)if(this.formOverlay.privacy_attr.type===this.OSD_PRIVACY_TYPE_LINE){var f=[l,m],h=[n,c],u=i-Math.min.apply(null,f),y=r-Math.min.apply(null,h);this.formOverlay.privacy_attr.points[0]=[l+u<0?0:l+u,n+y<0?0:n+y],this.formOverlay.privacy_attr.points[1]=[m+u<0?0:m+u,c+y<0?0:c+y]}else if(this.formOverlay.privacy_attr.type===this.OSD_PRIVACY_TYPE_POLY){f=[l,m,d,v],h=[n,c,_,p],u=i-Math.min.apply(null,f),y=r-Math.min.apply(null,h);this.formOverlay.privacy_attr.points[0]=[l+u<0?0:l+u,n+y<0?0:n+y],this.formOverlay.privacy_attr.points[1]=[m+u<0?0:m+u,c+y<0?0:c+y],this.formOverlay.privacy_attr.points[2]=[d+u<0?0:d+u,_+y<0?0:_+y],this.formOverlay.privacy_attr.points[3]=[v+u<0?0:v+u,p+y<0?0:p+y]}else this.formOverlay.privacy_attr.points=[[i,r],[i+o,r],[i+o,r+s],[i,r+s]];else 5===t?(this.formOverlay.privacy_attr.points[0]=[i+2,r+2],this.formOverlay.privacy_attr.type!==this.OSD_PRIVACY_TYPE_RECT&&this.formOverlay.privacy_attr.type!==this.OSD_PRIVACY_TYPE_MOSA||(l<d?(this.formOverlay.privacy_attr.points[1]=[d,n],this.formOverlay.privacy_attr.points[3]=[l,_]):(this.formOverlay.privacy_attr.points[1]=[l,_],this.formOverlay.privacy_attr.points[3]=[d,n]))):6===t?(this.formOverlay.privacy_attr.points[1]=[i+2,r+2],this.formOverlay.privacy_attr.type!==this.OSD_PRIVACY_TYPE_RECT&&this.formOverlay.privacy_attr.type!==this.OSD_PRIVACY_TYPE_MOSA||(m>v?(this.formOverlay.privacy_attr.points[0]=[v,c],this.formOverlay.privacy_attr.points[2]=[m,p]):(this.formOverlay.privacy_attr.points[0]=[m,p],this.formOverlay.privacy_attr.points[2]=[v,c]))):7===t?(this.formOverlay.privacy_attr.points[2]=[i+2,r+2],this.formOverlay.privacy_attr.type!==this.OSD_PRIVACY_TYPE_RECT&&this.formOverlay.privacy_attr.type!==this.OSD_PRIVACY_TYPE_MOSA||(l<d?(this.formOverlay.privacy_attr.points[1]=[d,n],this.formOverlay.privacy_attr.points[3]=[l,_]):(this.formOverlay.privacy_attr.points[1]=[l,_],this.formOverlay.privacy_attr.points[3]=[d,n]))):8===t&&(this.formOverlay.privacy_attr.points[3]=[i+2,r+2],this.formOverlay.privacy_attr.type!==this.OSD_PRIVACY_TYPE_RECT&&this.formOverlay.privacy_attr.type!==this.OSD_PRIVACY_TYPE_MOSA||(m>v?(this.formOverlay.privacy_attr.points[0]=[v,c],this.formOverlay.privacy_attr.points[2]=[m,p]):(this.formOverlay.privacy_attr.points[0]=[m,p],this.formOverlay.privacy_attr.points[2]=[v,c])));this.drawOSDPrivacy()}},dragElement(e,t){if(e){var a={},i={target:e,bounding:window,edgeLock:!0,index:0,onMove:function(){},onEnd:function(e,t){}};for(var r in t=t||{},i)"undefined"!=typeof t[r]?a[r]=t[r]:a[r]=i[r];var o=a.target,s=a.bounding,l=s,n={start:"mousedown",move:"mousemove",end:"mouseup"};"ontouchstart"in document&&(n={start:"touchstart",move:"touchmove",end:"touchend"});var m={};e.addEventListener(n.start,(function(e){if(window.WeakMap&&"undefined"==typeof document.msHidden||e.preventDefault(),e.touches&&e.touches.length&&(e=e.touches[0]),m.y=e.pageY,m.x=e.pageX,m.isMoving=!0,m.top=parseFloat(getComputedStyle(o).top)||0,m.left=parseFloat(getComputedStyle(o).left)||0,!0===a.edgeLock&&s){s===window?l={left:0,top:0,bottom:innerHeight,right:Math.min(innerWidth,document.documentElement.clientWidth)}:s.tagName&&(l=s.getBoundingClientRect());var t=o.getBoundingClientRect();m.range={y:[l.top-t.top,l.bottom-t.bottom],x:[l.left-t.left,l.right-t.right]}}})),document.addEventListener(n.move,(function(e){if(m.isMoving){e.preventDefault(),e.touches&&e.touches.length&&(e=e.touches[0]);var t=e.pageY-m.y,i=e.pageX-m.x;if(!0===a.edgeLock&&s){var r=Math.min.apply(null,m.range.x),l=Math.max.apply(null,m.range.x),n=Math.min.apply(null,m.range.y),c=Math.max.apply(null,m.range.y);i<r?i=r:i>l&&(i=l),t<n?t=n:t>c&&(t=c)}var d=m.top+t,_=m.left+i;o.style.top=d+"px",o.style.left=_+"px",a.onMove(_,d)}}),{passive:!1}),document.addEventListener(n.end,(function(){m.isMoving&&(m.isMoving=!1,a.onEnd(a.target,a.index))}))}}}},n=l,m=a(3736),c=(0,m.Z)(n,i,r,!1,null,"04344020",null),d=c.exports},8061:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var i=function(){var e=this,t=e._self._c;return t("el-container",{staticClass:"playback_container"},[t("el-main",{staticClass:"playback_view_left_container"},[t("el-container",{staticClass:"preview_container"},[t("el-main",{ref:"axMain",staticClass:"video_container"},[t("video",{staticClass:"axVideo",attrs:{id:"myVideo",controls:"control",muted:"",playsinline:"",oncontextmenu:"return false;"},domProps:{muted:!0}})])],1)],1),t("el-aside",{staticClass:"panel_container",attrs:{width:"350px"}},[t("div",{staticClass:"panel_view"},[t("p",{directives:[{name:"show",rawName:"v-show",value:0==e.play_list.length,expression:"play_list.length == 0"}],staticClass:"notice"},[e._v("未发现录像文件")]),t("div",{},[t("input",{staticStyle:{"margin-left":"10px"},attrs:{id:"chkAll",type:"checkbox"},on:{change:function(t){return e.selectAll()}}}),e._v("全选  "),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.removeSelected()}}},[e._v("删除")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.downloadSelected()}}},[e._v("下载")])],1),e._l(e.play_list,(function(a,i){return t("div",{key:i,class:{record_normal:!a.focus,record_play:a.focus},attrs:{for:i}},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.select,expression:"item.select"}],attrs:{type:"checkbox"},domProps:{value:a.name,checked:Array.isArray(a.select)?e._i(a.select,a.name)>-1:a.select},on:{change:function(t){var i=a.select,r=t.target,o=!!r.checked;if(Array.isArray(i)){var s=a.name,l=e._i(i,s);r.checked?l<0&&e.$set(a,"select",i.concat([s])):l>-1&&e.$set(a,"select",i.slice(0,l).concat(i.slice(l+1)))}else e.$set(a,"select",o)}}}),t("a",{on:{click:function(t){return e.play(i)}}},[e._v(e._s(a.name))]),e._v("  "),t("el-button",{staticClass:"download_btn",attrs:{type:"info",size:"mini"},on:{click:function(t){return e.download(i)}}},[e._v("下载")])],1)}))],2)])],1)},r=[],o=(a(7658),a(6229),a(7330),a(2062),{data(){return{rec_threshold:17179869184,is_loaded:!1,is_loading:!1,play_list:[],cur_index:0,_fs:null}},created(){console.log("Playback++"),this.entry_record_files()},methods:{errorHandler(e){var t="An error occured(errcd): ";console.log(t+e.code)},entry_record_files(){var e=this;window.webkitRequestFileSystem(window.PERSISTENT,this.rec_threshold,(function(t){e._fs=t,t.root.getDirectory("ax_video",{create:!0},(function(a){var i=a.createReader();i.readEntries((function(a){if(e.play_list=[],a.length>0)for(var i=0;i<a.length;i++){var r=a[i];r.isFile&&t.root.getFile("ax_video/"+r.name,{},(function(t){t.createWriter((function(a){if(a.length>102400){var i=!1;e.is_loaded||(e.load_record_file(t.name),e.is_loaded=!0,i=!0),e.play_list.push({name:t.name,select:!1,focus:i})}else t.remove((function(){console.log(t.toURL()+" is removed")}))}),e.errorHandler)}),e.errorHandler)}}),e.errorHandler)}),e.errorHandler)}))},load_record_file(e,t=!1){if(null==this._fs)return;var a=this;const i=document.getElementById("myVideo");i.pause(),i.currentTime=0,i.src=null,this._fs.root.getFile("ax_video/"+e,{},(function(e){e.file((function(e){i.src=window.URL.createObjectURL(e),t&&(i.play(),a.is_loading=!1)}))}),this.errorHandler)},play(e){if(!this.is_loading&&e!=this.cur_index&&e<this.play_list.length){for(var t=0;t<this.play_list.length;t++)this.play_list[t].focus=e==t;this.is_loading=!0,this.cur_index=e,this.load_record_file(this.play_list[e].name,!0)}},download(e){var t=this;e<this.play_list.length&&this._fs.root.getFile("ax_video/"+this.play_list[e].name,{},(function(a){a.file((function(a){var i=window.URL.createObjectURL(a),r=document.createElement("a");r.style.display="none",r.href=i,r.download=t.play_list[e].name,r.dispatchEvent(new MouseEvent("click"))}))}),this.errorHandler)},removeSelected(){var e=[];for(var t of this.play_list)t.select&&e.push(t.name);if(0!=e.length&&1==confirm("确定要删除文件吗？")){var a=this;this.is_loaded=!1,this.is_loading=!1,this.cur_index=0;const t=document.getElementById("myVideo");for(var i of(t.pause(),t.currentTime=0,t.src=null,e))this._fs.root.getFile("ax_video/"+i,{},(function(e){e.remove((function(){console.log(e.toURL()+" is removed")}))}),a.errorHandler);this.entry_record_files()}},downloadSelected(){for(var e=this,t=0,a=0;a<this.play_list.length;a++)if(this.play_list[a].select){let i=a;setTimeout((()=>{e.download(i)}),300*++t)}},selectAll(){const e=document.getElementById("chkAll");for(var t of this.play_list)t.select=!!e.checked}}}),s=o,l=a(3736),n=(0,l.Z)(s,i,r,!1,null,"4de65584",null),m=n.exports},2776:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"storage-container"},[t("el-form",{ref:"formStorageRef",attrs:{rules:e.formStorageRules,model:e.formStorage,"label-position":"left","label-width":"180px"}},[t("el-form-item",{attrs:{label:"【板端存储策略】"}}),t("el-form-item",{staticClass:"storage-item",attrs:{label:"启用板端存储"}},[t("el-switch",{model:{value:e.formStorage.storage.rec_actived,callback:function(t){e.$set(e.formStorage.storage,"rec_actived",t)},expression:"formStorage.storage.rec_actived"}})],1),t("el-form-item",{staticClass:"storage-item",attrs:{label:"启用循环覆盖"}},[t("el-switch",{attrs:{disabled:!e.formStorage.storage.rec_actived},model:{value:e.formStorage.storage.rec_loop_cover,callback:function(t){e.$set(e.formStorage.storage,"rec_loop_cover",t)},expression:"formStorage.storage.rec_loop_cover"}})],1),t("el-form-item",{staticClass:"storage-item",attrs:{label:"录像文件总空间(MB)"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{readonly:!0,disabled:!e.formStorage.storage.rec_actived},model:{value:e.formStorage.storage.rec_total,callback:function(t){e.$set(e.formStorage.storage,"rec_total",t)},expression:"formStorage.storage.rec_total"}})],1)],1),t("el-form-item",{staticClass:"storage-item",attrs:{label:"单个录像文件阈值(MB)",prop:"storage.rec_threshold"}},[t("el-input-number",{attrs:{min:16,max:1024,step:64,disabled:!e.formStorage.storage.rec_actived,"controls-position":"right",placeholder:"文件阈值"},model:{value:e.formStorage.storage.rec_threshold,callback:function(t){e.$set(e.formStorage.storage,"rec_threshold",t)},expression:"formStorage.storage.rec_threshold"}})],1),t("el-form-item",{staticClass:"storage-item",attrs:{label:"录像文件数上限(个)",prop:"storage.rec_max_count"}},[t("el-input-number",{attrs:{min:1,max:100,step:10,disabled:!e.formStorage.storage.rec_actived,"controls-position":"right",placeholder:"文件数上限"},model:{value:e.formStorage.storage.rec_max_count,callback:function(t){e.$set(e.formStorage.storage,"rec_max_count",t)},expression:"formStorage.storage.rec_max_count"}})],1),t("el-form-item",{staticClass:"storage-item",attrs:{label:"存储路径",prop:"storage.rec_path"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{readonly:!0,placeholder:"板端存储路径"},model:{value:e.formStorage.storage.rec_path,callback:function(t){e.$set(e.formStorage.storage,"rec_path",t)},expression:"formStorage.storage.rec_path"}})],1)],1),t("p",{staticStyle:{color:"indianred","margin-left":"60px"}},[e._v("注：单个录像文件阈值(MB) x 录像文件数上限(个)，须小于录像文件总空间(MB)")]),t("el-form-item",{attrs:{label:"【前端存储策略】"}}),t("el-form-item",{staticClass:"storage-item",attrs:{label:"单个录像文件阈值(MB)",prop:"rec_threshold_web"}},[t("el-input-number",{attrs:{min:16,max:1024,step:64,"controls-position":"right",placeholder:"文件阈值"},model:{value:e.formStorage.rec_threshold_web,callback:function(t){e.$set(e.formStorage,"rec_threshold_web",t)},expression:"formStorage.rec_threshold_web"}})],1),t("p",{staticStyle:{color:"indianred","margin-left":"60px"}},[e._v("注：录像回放仅涉及前端录像，下载录像时固定下载到当前用户的Downloads目录下")]),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("修改")])],1)],1)],1)},r=[],o={data(){const e=(e,t,a)=>{if(t.length>64)a(new Error);else{var i=/^\/(\w+\/?)+$/;i.test(t)||a(new Error)}a()};return{formStorage:{storage:{rec_actived:!0,rec_loop_cover:!0,rec_total:2560,rec_threshold:256,rec_max_count:10,rec_path:"/mnt/sdcard/"},rec_threshold_web:1024},formStorageRules:{"storage.rec_threshold":[{type:"integer",required:!0,message:"请输入板端录像文件阈值",trigger:"blur"}],"storage.rec_max_count":[{type:"integer",required:!0,message:"请输入板端录像文件数上限",trigger:"blur"}],"storage.rec_path":[{type:"string",required:!0,message:"请输入板端存储路径",trigger:"blur"},{required:!0,validator:e,message:"板端存储路径长度超过64位，或路径无效(要求Linux目录格式，如：'/mnt/sdcard/')",trigger:"blur"}],rec_threshold_web:[{type:"integer",required:!0,message:"请输入前端录像文件阈值",trigger:"blur"}]}}},created(){console.log("storage++"),this.getInfo()},methods:{async onSubmit(){try{let e=this.formStorage.storage.rec_threshold,t=this.formStorage.storage.rec_max_count;if(e*t>this.formStorage.storage.rec_total)return void this.$message.error("单个录像文件阈值 x 录像文件数上限, 超过板端总录像空间！");const{data:a}=await this.$http.post("setting/storage",this.formStorage);console.log("storage set return: ",a),200===a.meta.status?this.$message.success("修改成功"):404===a.meta.status?this.$message.error("板端存储路径创建失败"):this.$message.error("修改失败"),window.localStorage.setItem("rec_threshold_web",this.formStorage.rec_threshold_web)}catch(e){this.$message.error("修改失败")}},async getInfo(){try{const{data:t}=await this.$http.get("setting/storage");console.log("storage get return: ",t),200===t.meta.status&&(this.formStorage.storage=t.data.storage,0===this.formStorage.storage.rec_total&&(this.formStorage.storage.rec_total=2560));var e=window.localStorage.getItem("rec_threshold_web");void 0!=e&&(this.formStorage.rec_threshold_web=e)}catch(t){this.$message.error("获取信息失败")}}}},s=o,l=a(3736),n=(0,l.Z)(s,i,r,!1,null,"66d85307",null),m=n.exports},4898:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"system-container"},[t("el-form",{attrs:{"label-width":"100px",size:"mini"}},[t("el-form-item",{attrs:{label:"APP名称"}},[t("el-input",{attrs:{readonly:""},model:{value:e.appName,callback:function(t){e.appName=t},expression:"appName"}})],1),t("el-form-item",{attrs:{label:"APP版本"}},[t("el-input",{attrs:{readonly:""},model:{value:e.appVersion,callback:function(t){e.appVersion=t},expression:"appVersion"}})],1),t("el-form-item",{attrs:{label:"SDK版本"}},[t("el-input",{attrs:{readonly:""},model:{value:e.sdkVersion,callback:function(t){e.sdkVersion=t},expression:"sdkVersion"}})],1)],1)],1)},r=[],o={data(){return{appName:"--",appVersion:"--",sdkVersion:"--"}},created(){console.log("system++"),this.getInfo()},methods:{async getInfo(){try{const{data:e}=await this.$http.get("setting/system");console.log("system get return: ",e),200===e.meta.status&&(this.appName=e.data.appName,this.appVersion=e.data.appVersion,this.sdkVersion=e.data.sdkVersion)}catch(e){this.$message.error("获取信息失败")}}}},s=o,l=a(3736),n=(0,l.Z)(s,i,r,!1,null,"27c19d0e",null),m=n.exports},8985:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"video-preview-container"}),t("div",[t("el-form",{ref:"formVideoRef",attrs:{rules:e.formVideoRules,model:e.formVideo,"label-width":"110px",size:"mini"}},[t("el-form-item",{attrs:{label:"Camera:"}},[t("div",{attrs:{id:"cam_opt"}},[t("el-select",{attrs:{disabled:0==e.dual_mode,size:"mini"},on:{change:e.onChangeSrcID},model:{value:e.formVideo.videoFormat.src_id,callback:function(t){e.$set(e.formVideo.videoFormat,"src_id",t)},expression:"formVideo.videoFormat.src_id"}},[t("div",{attrs:{id:"cam_opt_content"}},e._l(e.formVideo.video_src_opts,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)])],1)]),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formVideo.cap_list[0]>0,expression:"formVideo.cap_list[0] > 0"}],staticClass:"inline",attrs:{label:"启用主码流0"}},[t("el-switch",{model:{value:e.formVideo.videoFormat.video0.enable_stream,callback:function(t){e.$set(e.formVideo.videoFormat.video0,"enable_stream",t)},expression:"formVideo.videoFormat.video0.enable_stream"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formVideo.cap_list[0]>0&&e.formVideo.videoFormat.video0.enable_stream,expression:"formVideo.cap_list[0] > 0 && formVideo.videoFormat.video0.enable_stream"}],attrs:{label:"","label-width":"50px"}},[t("el-form-item",{staticClass:"inline",attrs:{label:"编码类型:"}},[t("div",{attrs:{id:"rc_encoder_type_0"}},[t("el-select",{staticStyle:{width:"91%"},attrs:{size:"mini"},on:{change:function(t){return e.onChangeEncRcType(0)}},model:{value:e.formVideo.videoFormat.video0.encoder_type,callback:function(t){e.$set(e.formVideo.videoFormat.video0,"encoder_type",t)},expression:"formVideo.videoFormat.video0.encoder_type"}},[t("div",{attrs:{id:"rc_encoder_type_content_0"}},e._l(e.formVideo.encode_opts,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)])],1)]),t("el-form-item",{staticClass:"inline",attrs:{label:"码率(kbps):"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:300,max:15e3,step:500,disabled:2==e.formVideo.videoFormat.video0.rc_type,size:"mini"},model:{value:e.formVideo.videoFormat.video0.bit_rate,callback:function(t){e.$set(e.formVideo.videoFormat.video0,"bit_rate",t)},expression:"formVideo.videoFormat.video0.bit_rate"}})],1),t("el-row",[t("el-form-item",{staticClass:"inline",attrs:{label:"分辨率:"}},[t("div",{attrs:{id:"resolution_opt_0"}},[t("el-select",{staticStyle:{width:"91%"},attrs:{disabled:!e.formVideo.videoFormat.video0.enable_stream||!e.formVideo.videoFormat.video0.enable_res_chg,size:"mini"},model:{value:e.formVideo.videoFormat.video0.resolution,callback:function(t){e.$set(e.formVideo.videoFormat.video0,"resolution",t)},expression:"formVideo.videoFormat.video0.resolution"}},[t("div",{attrs:{id:"resolution_opt_content_0"}},e._l(e.formVideo.res_opt[0],(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)])],1)]),t("el-form-item",{staticClass:"inline",attrs:{label:"码流控制:"}},["1"==e.formVideo.videoFormat.video0.encoder_type?t("div",{attrs:{id:"rc_type_opt_0"}},[t("el-select",{staticStyle:{width:"91%"},attrs:{disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeEncRcType(0)}},model:{value:e.formVideo.videoFormat.video0.rc_type,callback:function(t){e.$set(e.formVideo.videoFormat.video0,"rc_type",t)},expression:"formVideo.videoFormat.video0.rc_type"}},[t("div",{attrs:{id:"rc_type_opt_content_0"}},e._l(e.rc_type_options_mjpeg_arr,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)])],1):t("div",{attrs:{id:"rc_type_opt_0"}},[t("el-select",{staticStyle:{width:"91%"},attrs:{disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeEncRcType(0)}},model:{value:e.formVideo.videoFormat.video0.rc_type,callback:function(t){e.$set(e.formVideo.videoFormat.video0,"rc_type",t)},expression:"formVideo.videoFormat.video0.rc_type"}},[t("div",{attrs:{id:"rc_type_opt_content_0"}},e._l(e.rc_type_options_arr,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)])],1)])],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.formVideo.videoFormat.video0.rc_type,expression:"formVideo.videoFormat.video0.rc_type != 2"}],staticClass:"inline",attrs:{label:"min_qp:"}},[t("div",{attrs:{id:"rc_min_qp_0"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:0,max:e.formVideo.videoFormat.video0.max_qp,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(0)}},model:{value:e.formVideo.videoFormat.video0.min_qp,callback:function(t){e.$set(e.formVideo.videoFormat.video0,"min_qp",t)},expression:"formVideo.videoFormat.video0.min_qp"}})],1)]),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.formVideo.videoFormat.video0.rc_type,expression:"formVideo.videoFormat.video0.rc_type != 2"}],staticClass:"inline",attrs:{label:"max_qp:"}},[t("div",{attrs:{id:"rc_max_qp_0"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:e.formVideo.videoFormat.video0.min_qp,max:51,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(0)}},model:{value:e.formVideo.videoFormat.video0.max_qp,callback:function(t){e.$set(e.formVideo.videoFormat.video0,"max_qp",t)},expression:"formVideo.videoFormat.video0.max_qp"}})],1)]),t("el-row",[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.formVideo.videoFormat.video0.rc_type&&1!=e.formVideo.videoFormat.video0.encoder_type,expression:"formVideo.videoFormat.video0.rc_type != 2 && formVideo.videoFormat.video0.encoder_type != 1"}],staticClass:"inline",attrs:{label:"min_iqp:"}},[t("div",{attrs:{id:"rc_min_iqp_0"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:0,max:e.formVideo.videoFormat.video0.max_iqp,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(0)}},model:{value:e.formVideo.videoFormat.video0.min_iqp,callback:function(t){e.$set(e.formVideo.videoFormat.video0,"min_iqp",t)},expression:"formVideo.videoFormat.video0.min_iqp"}})],1)]),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.formVideo.videoFormat.video0.rc_type&&1!=e.formVideo.videoFormat.video0.encoder_type,expression:"formVideo.videoFormat.video0.rc_type != 2 && formVideo.videoFormat.video0.encoder_type != 1"}],staticClass:"inline",attrs:{label:"max_iqp:"}},[t("div",{attrs:{id:"rc_max_iqp_0"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:e.formVideo.videoFormat.video0.min_iqp,max:51,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(0)}},model:{value:e.formVideo.videoFormat.video0.max_iqp,callback:function(t){e.$set(e.formVideo.videoFormat.video0,"max_iqp",t)},expression:"formVideo.videoFormat.video0.max_iqp"}})],1)])],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:(0===e.formVideo.videoFormat.video0.rc_type||4===e.formVideo.videoFormat.video0.rc_type)&&1!=e.formVideo.videoFormat.video0.encoder_type,expression:"(formVideo.videoFormat.video0.rc_type === 0 || formVideo.videoFormat.video0.rc_type === 4) && formVideo.videoFormat.video0.encoder_type != 1"}],staticClass:"inline",attrs:{label:"min_i_prop:"}},[t("div",{attrs:{id:"rc_min_i_prop_0"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:0,max:e.formVideo.videoFormat.video0.max_iprop,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(0)}},model:{value:e.formVideo.videoFormat.video0.min_iprop,callback:function(t){e.$set(e.formVideo.videoFormat.video0,"min_iprop",t)},expression:"formVideo.videoFormat.video0.min_iprop"}})],1)]),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:(0===e.formVideo.videoFormat.video0.rc_type||4===e.formVideo.videoFormat.video0.rc_type)&&1!=e.formVideo.videoFormat.video0.encoder_type,expression:"(formVideo.videoFormat.video0.rc_type === 0 || formVideo.videoFormat.video0.rc_type === 4) && formVideo.videoFormat.video0.encoder_type != 1"}],staticClass:"inline",attrs:{label:"max_i_prop:"}},[t("div",{attrs:{id:"rc_max_i_prop_0"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:e.formVideo.videoFormat.video0.min_iprop,max:100,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(0)}},model:{value:e.formVideo.videoFormat.video0.max_iprop,callback:function(t){e.$set(e.formVideo.videoFormat.video0,"max_iprop",t)},expression:"formVideo.videoFormat.video0.max_iprop"}})],1)]),t("el-row",[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1!=e.formVideo.videoFormat.video0.encoder_type,expression:"formVideo.videoFormat.video0.encoder_type != 1"}],staticClass:"inline",attrs:{label:"gop:"}},[t("div",{attrs:{id:"rc_gop_0"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:1,max:120,step:1,disabled:!1,size:"mini"},model:{value:e.formVideo.videoFormat.video0.gop,callback:function(t){e.$set(e.formVideo.videoFormat.video0,"gop",t)},expression:"formVideo.videoFormat.video0.gop"}})],1)])],1)],1),t("el-row",[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formVideo.cap_list[1]>0,expression:"formVideo.cap_list[1] > 0"}],staticClass:"inline",attrs:{label:"启用子码流1"}},[t("el-switch",{model:{value:e.formVideo.videoFormat.video1.enable_stream,callback:function(t){e.$set(e.formVideo.videoFormat.video1,"enable_stream",t)},expression:"formVideo.videoFormat.video1.enable_stream"}})],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formVideo.cap_list[1]>0&&e.formVideo.videoFormat.video1.enable_stream,expression:"formVideo.cap_list[1] > 0 && formVideo.videoFormat.video1.enable_stream"}],attrs:{label:"","label-width":"50px"}},[t("el-form-item",{staticClass:"inline",attrs:{label:"编码类型:"}},[t("div",{attrs:{id:"rc_encoder_type_1"}},[t("el-select",{staticStyle:{width:"91%"},attrs:{size:"mini"},on:{change:function(t){return e.onChangeEncRcType(1)}},model:{value:e.formVideo.videoFormat.video1.encoder_type,callback:function(t){e.$set(e.formVideo.videoFormat.video1,"encoder_type",t)},expression:"formVideo.videoFormat.video1.encoder_type"}},[t("div",{attrs:{id:"rc_encoder_type_content_1"}},e._l(e.formVideo.encode_opts,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)])],1)]),t("el-form-item",{staticClass:"inline",attrs:{label:"码率(kbps):"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:300,max:15e3,step:500,disabled:2==e.formVideo.videoFormat.video1.rc_type,size:"mini"},model:{value:e.formVideo.videoFormat.video1.bit_rate,callback:function(t){e.$set(e.formVideo.videoFormat.video1,"bit_rate",t)},expression:"formVideo.videoFormat.video1.bit_rate"}})],1),t("el-row",[t("el-form-item",{staticClass:"inline",attrs:{label:"分辨率:"}},[t("div",{attrs:{id:"resolution_opt_1"}},[t("el-select",{staticStyle:{width:"91%"},attrs:{disabled:!e.formVideo.videoFormat.video1.enable_stream||!e.formVideo.videoFormat.video1.enable_res_chg,size:"mini"},model:{value:e.formVideo.videoFormat.video1.resolution,callback:function(t){e.$set(e.formVideo.videoFormat.video1,"resolution",t)},expression:"formVideo.videoFormat.video1.resolution"}},[t("div",{attrs:{id:"resolution_opt_content_1"}},e._l(e.formVideo.res_opt[1],(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)])],1)]),t("el-form-item",{staticClass:"inline",attrs:{label:"码流控制:"}},["1"==e.formVideo.videoFormat.video1.encoder_type?t("div",{attrs:{id:"rc_type_opt_1"}},[t("el-select",{staticStyle:{width:"91%"},attrs:{disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeEncRcType(1)}},model:{value:e.formVideo.videoFormat.video1.rc_type,callback:function(t){e.$set(e.formVideo.videoFormat.video1,"rc_type",t)},expression:"formVideo.videoFormat.video1.rc_type"}},[t("div",{attrs:{id:"rc_type_opt_content_1"}},e._l(e.rc_type_options_mjpeg_arr,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)])],1):t("div",{attrs:{id:"rc_type_opt_1"}},[t("el-select",{staticStyle:{width:"91%"},attrs:{disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeEncRcType(1)}},model:{value:e.formVideo.videoFormat.video1.rc_type,callback:function(t){e.$set(e.formVideo.videoFormat.video1,"rc_type",t)},expression:"formVideo.videoFormat.video1.rc_type"}},[t("div",{attrs:{id:"rc_type_opt_content_1"}},e._l(e.rc_type_options_arr,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)])],1)])],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.formVideo.videoFormat.video1.rc_type,expression:"formVideo.videoFormat.video1.rc_type != 2"}],staticClass:"inline",attrs:{label:"min_qp:"}},[t("div",{attrs:{id:"rc_min_qp_1"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:0,max:e.formVideo.videoFormat.video1.max_qp,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(1)}},model:{value:e.formVideo.videoFormat.video1.min_qp,callback:function(t){e.$set(e.formVideo.videoFormat.video1,"min_qp",t)},expression:"formVideo.videoFormat.video1.min_qp"}})],1)]),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.formVideo.videoFormat.video1.rc_type,expression:"formVideo.videoFormat.video1.rc_type != 2"}],staticClass:"inline",attrs:{label:"max_qp:"}},[t("div",{attrs:{id:"rc_max_qp_1"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:e.formVideo.videoFormat.video1.min_qp,max:51,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(1)}},model:{value:e.formVideo.videoFormat.video1.max_qp,callback:function(t){e.$set(e.formVideo.videoFormat.video1,"max_qp",t)},expression:"formVideo.videoFormat.video1.max_qp"}})],1)]),t("el-row",[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.formVideo.videoFormat.video1.rc_type&&1!=e.formVideo.videoFormat.video1.encoder_type,expression:"formVideo.videoFormat.video1.rc_type != 2 && formVideo.videoFormat.video1.encoder_type != 1"}],staticClass:"inline",attrs:{label:"min_iqp:"}},[t("div",{attrs:{id:"rc_min_iqp_1"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:0,max:e.formVideo.videoFormat.video1.max_iqp,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(1)}},model:{value:e.formVideo.videoFormat.video1.min_iqp,callback:function(t){e.$set(e.formVideo.videoFormat.video1,"min_iqp",t)},expression:"formVideo.videoFormat.video1.min_iqp"}})],1)]),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.formVideo.videoFormat.video1.rc_type&&1!=e.formVideo.videoFormat.video1.encoder_type,expression:"formVideo.videoFormat.video1.rc_type != 2 && formVideo.videoFormat.video1.encoder_type != 1"}],staticClass:"inline",attrs:{label:"max_iqp:"}},[t("div",{attrs:{id:"rc_max_iqp_1"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:e.formVideo.videoFormat.video1.min_iqp,max:51,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(1)}},model:{value:e.formVideo.videoFormat.video1.max_iqp,callback:function(t){e.$set(e.formVideo.videoFormat.video1,"max_iqp",t)},expression:"formVideo.videoFormat.video1.max_iqp"}})],1)])],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:(0===e.formVideo.videoFormat.video1.rc_type||4===e.formVideo.videoFormat.video1.rc_type)&&1!=e.formVideo.videoFormat.video1.encoder_type,expression:"(formVideo.videoFormat.video1.rc_type === 0 || formVideo.videoFormat.video1.rc_type === 4) && formVideo.videoFormat.video1.encoder_type != 1"}],staticClass:"inline",attrs:{label:"min_i_prop:"}},[t("div",{attrs:{id:"rc_min_i_prop_1"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:0,max:e.formVideo.videoFormat.video1.max_iprop,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(1)}},model:{value:e.formVideo.videoFormat.video1.min_iprop,callback:function(t){e.$set(e.formVideo.videoFormat.video1,"min_iprop",t)},expression:"formVideo.videoFormat.video1.min_iprop"}})],1)]),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:(0===e.formVideo.videoFormat.video1.rc_type||4===e.formVideo.videoFormat.video1.rc_type)&&1!=e.formVideo.videoFormat.video1.encoder_type,expression:"(formVideo.videoFormat.video1.rc_type === 0 || formVideo.videoFormat.video1.rc_type === 4) && formVideo.videoFormat.video1.encoder_type != 1"}],staticClass:"inline",attrs:{label:"max_i_prop:"}},[t("div",{attrs:{id:"rc_max_i_prop_1"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:e.formVideo.videoFormat.video1.min_iprop,max:100,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(1)}},model:{value:e.formVideo.videoFormat.video1.max_iprop,callback:function(t){e.$set(e.formVideo.videoFormat.video1,"max_iprop",t)},expression:"formVideo.videoFormat.video1.max_iprop"}})],1)]),t("el-row",[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1!=e.formVideo.videoFormat.video1.encoder_type,expression:"formVideo.videoFormat.video1.encoder_type != 1"}],staticClass:"inline",attrs:{label:"gop:"}},[t("div",{attrs:{id:"rc_gop_1"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:1,max:120,step:1,disabled:!1,size:"mini"},model:{value:e.formVideo.videoFormat.video1.gop,callback:function(t){e.$set(e.formVideo.videoFormat.video1,"gop",t)},expression:"formVideo.videoFormat.video1.gop"}})],1)])],1)],1),t("el-row",[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formVideo.cap_list[2]>0,expression:"formVideo.cap_list[2] > 0"}],staticClass:"inline",attrs:{label:"启用子码流2"}},[t("el-switch",{model:{value:e.formVideo.videoFormat.video2.enable_stream,callback:function(t){e.$set(e.formVideo.videoFormat.video2,"enable_stream",t)},expression:"formVideo.videoFormat.video2.enable_stream"}})],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formVideo.cap_list[2]>0&&e.formVideo.videoFormat.video2.enable_stream,expression:"formVideo.cap_list[2] > 0 && formVideo.videoFormat.video2.enable_stream"}],attrs:{label:"","label-width":"50px"}},[t("el-form-item",{staticClass:"inline",attrs:{label:"编码类型:"}},[t("div",{attrs:{id:"rc_encoder_type_2"}},[t("el-select",{staticStyle:{width:"91%"},attrs:{size:"mini"},on:{change:function(t){return e.onChangeEncRcType(2)}},model:{value:e.formVideo.videoFormat.video2.encoder_type,callback:function(t){e.$set(e.formVideo.videoFormat.video2,"encoder_type",t)},expression:"formVideo.videoFormat.video2.encoder_type"}},[t("div",{attrs:{id:"rc_encoder_type_content_2"}},e._l(e.formVideo.encode_opts,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)])],1)]),t("el-form-item",{staticClass:"inline",attrs:{label:"码率(kbps):"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:300,max:15e3,step:500,disabled:2==e.formVideo.videoFormat.video2.rc_type,size:"mini"},model:{value:e.formVideo.videoFormat.video2.bit_rate,callback:function(t){e.$set(e.formVideo.videoFormat.video2,"bit_rate",t)},expression:"formVideo.videoFormat.video2.bit_rate"}})],1),t("el-row",[t("el-form-item",{staticClass:"inline",attrs:{label:"分辨率:"}},[t("div",{attrs:{id:"resolution_opt_2"}},[t("el-select",{staticStyle:{width:"91%"},attrs:{disabled:!e.formVideo.videoFormat.video2.enable_stream||!e.formVideo.videoFormat.video2.enable_res_chg,size:"mini"},model:{value:e.formVideo.videoFormat.video2.resolution,callback:function(t){e.$set(e.formVideo.videoFormat.video2,"resolution",t)},expression:"formVideo.videoFormat.video2.resolution"}},[t("div",{attrs:{id:"resolution_opt_content_2"}},e._l(e.formVideo.res_opt[2],(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)])],1)]),t("el-form-item",{staticClass:"inline",attrs:{label:"码流控制:"}},["1"==e.formVideo.videoFormat.video2.encoder_type?t("div",{attrs:{id:"rc_type_opt_2"}},[t("el-select",{staticStyle:{width:"91%"},attrs:{disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeEncRcType(2)}},model:{value:e.formVideo.videoFormat.video2.rc_type,callback:function(t){e.$set(e.formVideo.videoFormat.video2,"rc_type",t)},expression:"formVideo.videoFormat.video2.rc_type"}},[t("div",{attrs:{id:"rc_type_opt_content_2"}},e._l(e.rc_type_options_mjpeg_arr,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)])],1):t("div",{attrs:{id:"rc_type_opt_2"}},[t("el-select",{staticStyle:{width:"91%"},attrs:{disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeEncRcType(2)}},model:{value:e.formVideo.videoFormat.video2.rc_type,callback:function(t){e.$set(e.formVideo.videoFormat.video2,"rc_type",t)},expression:"formVideo.videoFormat.video2.rc_type"}},[t("div",{attrs:{id:"rc_type_opt_content_2"}},e._l(e.rc_type_options_arr,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)])],1)])],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.formVideo.videoFormat.video2.rc_type,expression:"formVideo.videoFormat.video2.rc_type != 2"}],staticClass:"inline",attrs:{label:"min_qp:"}},[t("div",{attrs:{id:"rc_min_qp_2"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:0,max:e.formVideo.videoFormat.video2.max_qp,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(2)}},model:{value:e.formVideo.videoFormat.video2.min_qp,callback:function(t){e.$set(e.formVideo.videoFormat.video2,"min_qp",t)},expression:"formVideo.videoFormat.video2.min_qp"}})],1)]),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.formVideo.videoFormat.video2.rc_type,expression:"formVideo.videoFormat.video2.rc_type != 2"}],staticClass:"inline",attrs:{label:"max_qp:"}},[t("div",{attrs:{id:"rc_max_qp_2"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:e.formVideo.videoFormat.video2.min_qp,max:51,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(2)}},model:{value:e.formVideo.videoFormat.video2.max_qp,callback:function(t){e.$set(e.formVideo.videoFormat.video2,"max_qp",t)},expression:"formVideo.videoFormat.video2.max_qp"}})],1)]),t("el-row",[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.formVideo.videoFormat.video2.rc_type&&1!=e.formVideo.videoFormat.video2.encoder_type,expression:"formVideo.videoFormat.video2.rc_type != 2 && formVideo.videoFormat.video2.encoder_type != 1"}],staticClass:"inline",attrs:{label:"min_iqp:"}},[t("div",{attrs:{id:"rc_min_iqp_2"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:0,max:e.formVideo.videoFormat.video2.max_iqp,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(2)}},model:{value:e.formVideo.videoFormat.video2.min_iqp,callback:function(t){e.$set(e.formVideo.videoFormat.video2,"min_iqp",t)},expression:"formVideo.videoFormat.video2.min_iqp"}})],1)]),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.formVideo.videoFormat.video2.rc_type&&1!=e.formVideo.videoFormat.video2.encoder_type,expression:"formVideo.videoFormat.video2.rc_type != 2 && formVideo.videoFormat.video2.encoder_type != 1"}],staticClass:"inline",attrs:{label:"max_iqp:"}},[t("div",{attrs:{id:"rc_max_iqp_2"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:e.formVideo.videoFormat.video2.min_iqp,max:51,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(2)}},model:{value:e.formVideo.videoFormat.video2.max_iqp,callback:function(t){e.$set(e.formVideo.videoFormat.video2,"max_iqp",t)},expression:"formVideo.videoFormat.video2.max_iqp"}})],1)])],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:(0===e.formVideo.videoFormat.video2.rc_type||4===e.formVideo.videoFormat.video2.rc_type)&&1!=e.formVideo.videoFormat.video2.encoder_type,expression:"(formVideo.videoFormat.video2.rc_type === 0 || formVideo.videoFormat.video2.rc_type === 4) && formVideo.videoFormat.video2.encoder_type != 1"}],staticClass:"inline",attrs:{label:"min_i_prop:"}},[t("div",{attrs:{id:"rc_min_i_prop_2"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:0,max:e.formVideo.videoFormat.video2.max_iprop,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(2)}},model:{value:e.formVideo.videoFormat.video2.min_iprop,callback:function(t){e.$set(e.formVideo.videoFormat.video2,"min_iprop",t)},expression:"formVideo.videoFormat.video2.min_iprop"}})],1)]),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:(0===e.formVideo.videoFormat.video2.rc_type||4===e.formVideo.videoFormat.video2.rc_type)&&1!=e.formVideo.videoFormat.video2.encoder_type,expression:"(formVideo.videoFormat.video2.rc_type === 0 || formVideo.videoFormat.video2.rc_type === 4) && formVideo.videoFormat.video2.encoder_type != 1"}],staticClass:"inline",attrs:{label:"max_i_prop:"}},[t("div",{attrs:{id:"rc_max_i_prop_2"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:e.formVideo.videoFormat.video2.min_iprop,max:100,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(2)}},model:{value:e.formVideo.videoFormat.video2.max_iprop,callback:function(t){e.$set(e.formVideo.videoFormat.video2,"max_iprop",t)},expression:"formVideo.videoFormat.video2.max_iprop"}})],1)]),t("el-row",[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1!=e.formVideo.videoFormat.video2.encoder_type,expression:"formVideo.videoFormat.video2.encoder_type != 1"}],staticClass:"inline",attrs:{label:"gop:"}},[t("div",{attrs:{id:"rc_gop_2"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:1,max:120,step:1,disabled:!1,size:"mini"},model:{value:e.formVideo.videoFormat.video2.gop,callback:function(t){e.$set(e.formVideo.videoFormat.video2,"gop",t)},expression:"formVideo.videoFormat.video2.gop"}})],1)])],1)],1),t("el-row",[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formVideo.cap_list[3]>0,expression:"formVideo.cap_list[3] > 0"}],staticClass:"inline",attrs:{label:"启用子码流3"}},[t("el-switch",{model:{value:e.formVideo.videoFormat.video3.enable_stream,callback:function(t){e.$set(e.formVideo.videoFormat.video3,"enable_stream",t)},expression:"formVideo.videoFormat.video3.enable_stream"}})],1)],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formVideo.cap_list[3]>0&&e.formVideo.videoFormat.video3.enable_stream,expression:"formVideo.cap_list[3] > 0 && formVideo.videoFormat.video3.enable_stream"}],attrs:{label:"","label-width":"50px"}},[t("el-form-item",{staticClass:"inline",attrs:{label:"编码类型:"}},[t("div",{attrs:{id:"rc_encoder_type_3"}},[t("el-select",{staticStyle:{width:"91%"},attrs:{size:"mini"},on:{change:function(t){return e.onChangeEncRcType(3)}},model:{value:e.formVideo.videoFormat.video3.encoder_type,callback:function(t){e.$set(e.formVideo.videoFormat.video3,"encoder_type",t)},expression:"formVideo.videoFormat.video3.encoder_type"}},[t("div",{attrs:{id:"rc_encoder_type_content_3"}},e._l(e.formVideo.encode_opts,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)])],1)]),t("el-form-item",{staticClass:"inline",attrs:{label:"码率(kbps):"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:300,max:15e3,step:500,disabled:2==e.formVideo.videoFormat.video3.rc_type,size:"mini"},model:{value:e.formVideo.videoFormat.video3.bit_rate,callback:function(t){e.$set(e.formVideo.videoFormat.video3,"bit_rate",t)},expression:"formVideo.videoFormat.video3.bit_rate"}})],1),t("el-row",[t("el-form-item",{staticClass:"inline",attrs:{label:"分辨率:"}},[t("div",{attrs:{id:"resolution_opt_3"}},[t("el-select",{staticStyle:{width:"91%"},attrs:{disabled:!e.formVideo.videoFormat.video3.enable_stream||!e.formVideo.videoFormat.video3.enable_res_chg,size:"mini"},model:{value:e.formVideo.videoFormat.video3.resolution,callback:function(t){e.$set(e.formVideo.videoFormat.video3,"resolution",t)},expression:"formVideo.videoFormat.video3.resolution"}},[t("div",{attrs:{id:"resolution_opt_content_3"}},e._l(e.formVideo.res_opt[3],(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)])],1)]),t("el-form-item",{staticClass:"inline",attrs:{label:"码流控制:"}},["1"==e.formVideo.videoFormat.video3.encoder_type?t("div",{attrs:{id:"rc_type_opt_3"}},[t("el-select",{staticStyle:{width:"91%"},attrs:{disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeEncRcType(3)}},model:{value:e.formVideo.videoFormat.video3.rc_type,callback:function(t){e.$set(e.formVideo.videoFormat.video3,"rc_type",t)},expression:"formVideo.videoFormat.video3.rc_type"}},[t("div",{attrs:{id:"rc_type_opt_content_3"}},e._l(e.rc_type_options_mjpeg_arr,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)])],1):t("div",{attrs:{id:"rc_type_opt_3"}},[t("el-select",{staticStyle:{width:"91%"},attrs:{disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeEncRcType(3)}},model:{value:e.formVideo.videoFormat.video3.rc_type,callback:function(t){e.$set(e.formVideo.videoFormat.video3,"rc_type",t)},expression:"formVideo.videoFormat.video3.rc_type"}},[t("div",{attrs:{id:"rc_type_opt_content_3"}},e._l(e.rc_type_options_arr,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)])],1)])],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.formVideo.videoFormat.video3.rc_type,expression:"formVideo.videoFormat.video3.rc_type != 2"}],staticClass:"inline",attrs:{label:"min_qp:"}},[t("div",{attrs:{id:"rc_min_qp_3"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:0,max:e.formVideo.videoFormat.video3.max_qp,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(3)}},model:{value:e.formVideo.videoFormat.video3.min_qp,callback:function(t){e.$set(e.formVideo.videoFormat.video3,"min_qp",t)},expression:"formVideo.videoFormat.video3.min_qp"}})],1)]),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.formVideo.videoFormat.video3.rc_type,expression:"formVideo.videoFormat.video3.rc_type != 2"}],staticClass:"inline",attrs:{label:"max_qp:"}},[t("div",{attrs:{id:"rc_max_qp_3"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:e.formVideo.videoFormat.video3.min_qp,max:51,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(3)}},model:{value:e.formVideo.videoFormat.video3.max_qp,callback:function(t){e.$set(e.formVideo.videoFormat.video3,"max_qp",t)},expression:"formVideo.videoFormat.video3.max_qp"}})],1)]),t("el-row",[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.formVideo.videoFormat.video3.rc_type&&1!=e.formVideo.videoFormat.video3.encoder_type,expression:"formVideo.videoFormat.video3.rc_type != 2 && formVideo.videoFormat.video3.encoder_type != 1"}],staticClass:"inline",attrs:{label:"min_iqp:"}},[t("div",{attrs:{id:"rc_min_iqp_3"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:0,max:e.formVideo.videoFormat.video3.max_iqp,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(3)}},model:{value:e.formVideo.videoFormat.video3.min_iqp,callback:function(t){e.$set(e.formVideo.videoFormat.video3,"min_iqp",t)},expression:"formVideo.videoFormat.video3.min_iqp"}})],1)]),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2!=e.formVideo.videoFormat.video3.rc_type&&1!=e.formVideo.videoFormat.video3.encoder_type,expression:"formVideo.videoFormat.video3.rc_type != 2 && formVideo.videoFormat.video3.encoder_type != 1"}],staticClass:"inline",attrs:{label:"max_iqp:"}},[t("div",{attrs:{id:"rc_max_iqp_3"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:e.formVideo.videoFormat.video3.min_iqp,max:51,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(3)}},model:{value:e.formVideo.videoFormat.video3.max_iqp,callback:function(t){e.$set(e.formVideo.videoFormat.video3,"max_iqp",t)},expression:"formVideo.videoFormat.video3.max_iqp"}})],1)])],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:(0===e.formVideo.videoFormat.video3.rc_type||4===e.formVideo.videoFormat.video3.rc_type)&&1!=e.formVideo.videoFormat.video3.encoder_type,expression:"(formVideo.videoFormat.video3.rc_type === 0 || formVideo.videoFormat.video3.rc_type === 4) && formVideo.videoFormat.video3.encoder_type != 1"}],staticClass:"inline",attrs:{label:"min_i_prop:"}},[t("div",{attrs:{id:"rc_min_i_prop_3"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:0,max:e.formVideo.videoFormat.video3.max_iprop,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(3)}},model:{value:e.formVideo.videoFormat.video3.min_iprop,callback:function(t){e.$set(e.formVideo.videoFormat.video3,"min_iprop",t)},expression:"formVideo.videoFormat.video3.min_iprop"}})],1)]),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:(0===e.formVideo.videoFormat.video3.rc_type||4===e.formVideo.videoFormat.video3.rc_type)&&1!=e.formVideo.videoFormat.video3.encoder_type,expression:"(formVideo.videoFormat.video3.rc_type === 0 || formVideo.videoFormat.video3.rc_type === 4) && formVideo.videoFormat.video3.encoder_type != 1"}],staticClass:"inline",attrs:{label:"max_i_prop:"}},[t("div",{attrs:{id:"rc_max_i_prop_3"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:e.formVideo.videoFormat.video3.min_iprop,max:100,step:10,disabled:!1,size:"mini"},on:{change:function(t){return e.onChangeRcVal(3)}},model:{value:e.formVideo.videoFormat.video3.max_iprop,callback:function(t){e.$set(e.formVideo.videoFormat.video3,"max_iprop",t)},expression:"formVideo.videoFormat.video3.max_iprop"}})],1)]),t("el-row",[t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1!=e.formVideo.videoFormat.video3.encoder_type,expression:"formVideo.videoFormat.video3.encoder_type != 1"}],staticClass:"inline",attrs:{label:"gop:"}},[t("div",{attrs:{id:"rc_gop_3"}},[t("el-input-number",{staticStyle:{width:"91%"},attrs:{"controls-position":"right",min:1,max:120,step:1,disabled:!1,size:"mini"},model:{value:e.formVideo.videoFormat.video3.gop,callback:function(t){e.$set(e.formVideo.videoFormat.video3,"gop",t)},expression:"formVideo.videoFormat.video3.gop"}})],1)])],1)],1),t("el-form-item",[t("el-divider"),t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("修改")])],1)],1)],1)])},r=[],o=(a(7658),{props:["dual_mode"],data(){return{formVideo:{video_src_opts:[{label:"0",value:0},{label:"1",value:1}],rc_type_options:[{label:"CBR",value:0},{label:"VBR",value:1},{label:"FIXQP",value:2},{label:"AVBR",value:3},{label:"CVBR",value:4}],encode_opts:[{label:"H264",value:0},{label:"MJPEG",value:1},{label:"H265",value:2}],res_opt:[[],[],[],[]],enc_rc_info:[[],[],[],[]],cap_list:[0,0,0,0],videoFormat:{src_id:0,video0:{enable_stream:!1,enable_res_chg:!1,encoder_type:0,bit_rate:0,gop:0,resolution:"",resolution_opt:[],rc_type:0,min_qp:0,max_qp:51,min_iqp:0,max_iqp:51,min_iprop:10,max_iprop:40,sht_stat_time:3,lt_stat_time:600,lt_min_bitrate:2048,lt_max_bitrate:4096},video1:{enable_stream:!1,enable_res_chg:!1,encoder_type:0,bit_rate:0,gop:0,resolution:"",resolution_opt:[],rc_type:0,min_qp:0,max_qp:51,min_iqp:0,max_iqp:51,min_iprop:10,max_iprop:40,sht_stat_time:3,lt_stat_time:600,lt_min_bitrate:2048,lt_max_bitrate:4096},video2:{enable_stream:!1,enable_res_chg:!1,encoder_type:0,bit_rate:0,gop:0,resolution:"",resolution_opt:[],rc_type:0,min_qp:0,max_qp:51,min_iqp:0,max_iqp:51,min_iprop:10,max_iprop:40,sht_stat_time:3,lt_stat_time:600,lt_min_bitrate:2048,lt_max_bitrate:4096},video3:{enable_stream:!1,enable_res_chg:!1,encoder_type:0,bit_rate:0,gop:0,resolution:"",resolution_opt:[],rc_type:0,min_qp:0,max_qp:51,min_iqp:0,max_iqp:51,min_iprop:10,max_iprop:40,sht_stat_time:3,lt_stat_time:600,lt_min_bitrate:2048,lt_max_bitrate:4096}}},rc_type_options_arr:[{label:"CBR",value:0},{label:"VBR",value:1},{label:"FIXQP",value:2},{label:"AVBR",value:3},{label:"CVBR",value:4}],rc_type_options_mjpeg_arr:[{label:"CBR",value:0},{label:"VBR",value:1},{label:"FIXQP",value:2}],formVideoRules:{}}},created(){console.log("video++"),this.getInfo();window.localStorage.getItem("app_name");console.log("video--")},methods:{async onSubmit(){try{var{...e}=this.formVideo.videoFormat;this.formVideo.cap_list[1]<=0&&delete e.video1,this.formVideo.cap_list[2]<=0&&delete e.video2,this.formVideo.cap_list[3]<=0&&delete e.video3;const{data:t}=await this.$http.post("setting/video",e);console.log("video get return: ",t),200===t.meta.status?this.$message.success("修改成功"):this.$message.success("修改失败")}catch(t){this.$message.error("修改失败")}},async getInfo(){try{const{data:e}=await this.$http.get("setting/video",{params:{src_id:this.formVideo.videoFormat.src_id}});console.log("video get return: ",e),200===e.meta.status&&(this.formVideo.cap_list=e.data.cap_list,this.formVideo.cap_list[0]>0&&(this.formVideo.videoFormat.video0=e.data.video0,this.formVideo.enc_rc_info[0]=e.data.attrVideo0),this.formVideo.cap_list[1]>0&&(this.formVideo.videoFormat.video1=e.data.video1,this.formVideo.enc_rc_info[1]=e.data.attrVideo1),this.formVideo.cap_list[2]>0&&(this.formVideo.videoFormat.video2=e.data.video2,this.formVideo.enc_rc_info[2]=e.data.attrVideo2),this.formVideo.cap_list[3]>0&&(this.formVideo.videoFormat.video3=e.data.video3,this.formVideo.enc_rc_info[3]=e.data.attrVideo3),this.init_resolution_options(),this.init_rc_infos())}catch(e){console.log("video getInfo got exception: "+e),this.$message.error("获取信息失败")}},init_rc_infos(){try{let e=this.formVideo.enc_rc_info,t=[this.formVideo.videoFormat.video0,this.formVideo.videoFormat.video1,this.formVideo.videoFormat.video2,this.formVideo.videoFormat.video3];for(let a=0;a<t.length;a++)if(e[a].enc_rc_info)for(let i=0;i<e[a].enc_rc_info.length;i++){let r=e[a].enc_rc_info[i];if(t[a].encoder_type==r.encoder_type){for(let e=0;e<r.rc.length;e++)if(r.rc[e].rc_type==t[a].rc_type){t[a].min_qp=r.rc[e].min_qp,t[a].max_qp=r.rc[e].max_qp,t[a].min_iqp=r.rc[e].min_iqp,t[a].max_iqp=r.rc[e].max_iqp,t[a].min_iprop=r.rc[e].min_iprop,t[a].max_iprop=r.rc[e].max_iprop;break}break}}}catch(e){console.log("init_rc_infos got exception: "+e)}},init_resolution_options(){let e=this.formVideo.enc_rc_info;try{for(var t=0;t<e.length;t++)if(e[t].resolution_opt){this.formVideo.res_opt[t]=[];for(var a=0;a<e[t].resolution_opt.length;a++){var i=e[t].resolution_opt[a].trim()+"",r={label:i,value:i};this.formVideo.res_opt[t].push(r)}}}catch(o){console.log("init_resolution_options got exception: "+o)}},onChangeSrcID(){this.getInfo()},onChangeEncRcType(e){let t=this.formVideo.enc_rc_info,a=[this.formVideo.videoFormat.video0,this.formVideo.videoFormat.video1,this.formVideo.videoFormat.video2,this.formVideo.videoFormat.video3];try{1!=a[e].encoder_type||3!=a[e].rc_type&&4!=a[e].rc_type||(a[e].rc_type=0);for(let i=0;i<t[e].enc_rc_info.length;i++){let r=t[e].enc_rc_info[i];if(a[e].encoder_type==r.encoder_type){for(let t=0;t<r.rc.length;t++)if(r.rc[t].rc_type==a[e].rc_type){let i=r.rc[t];a[e].min_qp=i.min_qp,a[e].max_qp=i.max_qp,a[e].min_iqp=i.min_iqp,a[e].max_iqp=i.max_iqp,a[e].min_iprop=i.min_iprop,a[e].max_iprop=i.max_iprop,a[e].sht_stat_time=i.sht_stat_time,a[e].lt_stat_time=i.lt_stat_time,a[e].lt_min_bitrate=i.lt_min_bitrate,a[e].lt_max_bitrate=i.lt_max_bitrate;break}break}}}catch(i){console.log("onChangeEncRcType got exception: "+i)}},onChangeRcVal(e){let t=this.formVideo.enc_rc_info,a=[this.formVideo.videoFormat.video0,this.formVideo.videoFormat.video1,this.formVideo.videoFormat.video2,this.formVideo.videoFormat.video3];try{for(let i=0;i<t[e].enc_rc_info.length;i++){let r=t[e].enc_rc_info[i];if(a[e].encoder_type==r.encoder_type){for(let t=0;t<r.rc.length;t++)if(r.rc[t].rc_type==a[e].rc_type){let i=r.rc[t];i.min_qp=a[e].min_qp,i.max_qp=a[e].max_qp,i.min_iqp=a[e].min_iqp,i.max_iqp=a[e].max_iqp,i.min_iprop=a[e].min_iprop,i.max_iprop=a[e].max_iprop,i.sht_stat_time=a[e].sht_stat_time,i.lt_stat_time=a[e].lt_stat_time,i.lt_min_bitrate=a[e].lt_min_bitrate,i.lt_max_bitrate=a[e].lt_max_bitrate;break}break}}}catch(i){console.log("onChangeRcVal got exception: "+i)}}}}),s=o,l=a(3736),n=(0,l.Z)(s,i,r,!1,null,"56b942d5",null),m=n.exports}}]);